{
  "scenario_id": "likeprovodnik_main_router_v2",
  "name": "–õ–∞–π–∫–ü—Ä–æ–≤–æ–¥–Ω–∏–∫ - –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä v2.0",
  "description": "–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –º–æ–¥—É–ª—è–º (–∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ Universal Agent Platform)",
  "version": "2.0",
  
  "steps": [
    {
      "id": "start",
      "type": "start",
      "next_step": "welcome_message"
    },
    {
      "id": "welcome_message",
      "type": "channel_action",
      "params": {
        "action": "send_message",
        "chat_id": "{chat_id}",
        "text": "ü§ñ –ü—Ä–∏–≤–µ—Ç! –Ø –õ–∞–π–∫–ü—Ä–æ–≤–æ–¥–Ω–∏–∫ ‚Äî —Ç–≤–æ–π AI-–ø–æ–º–æ—â–Ω–∏–∫ –≤ –º–∏—Ä–µ –±–∏–∑–Ω–µ—Å–∞ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π!\n\n‚ú® –ß—Ç–æ —è —É–º–µ—é:\nüéØ <b>AI-–ü—É—Ç—å</b> ‚Äî —Å–æ–∑–¥–∞—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è\nüí° <b>–õ–∞–π—Ñ—Ö–∞–∫–∏</b> ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä—É—é –±–∏–∑–Ω–µ—Å-—Å–æ–≤–µ—Ç—ã —Å –ò–ò\nüë®‚Äçüè´ <b>–ù–∞—Å—Ç–∞–≤–Ω–∏–∫</b> ‚Äî –æ—Ç–≤–µ—á–∞—é –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∫—É—Ä—Å–∞–º\nüß† <b>–ù–µ–π—Ä–æ–≠–∫—Å–ø–µ—Ä—Ç</b> ‚Äî —Ä–µ—à–∞—é —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ—à–∞–≥–æ–≤–æ\nüßò <b>AI-–ö–æ—É—á</b> ‚Äî –ø–æ–º–æ–≥–∞—é —Å –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π –∏ —Ä–µ—Ñ–ª–µ–∫—Å–∏–µ–π\nüì∞ <b>i–î–∞–π–¥–∂–µ—Å—Ç</b> ‚Äî –Ω–æ–≤–æ—Å—Ç–∏ –ò–ò –∑–∞ –Ω–µ–¥–µ–ª—é\n\nüí¨ –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ —á—Ç–æ —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç!",
        "parse_mode": "HTML"
      },
      "next_step": "load_user_profile"
    },
    {
      "id": "load_user_profile",
      "type": "mongo_find_one_document",
      "params": {
        "collection": "users",
        "filter": {"user_id": "{user_id}"},
        "output_var": "user_profile"
      },
      "next_step": "check_new_user"
    },
    {
      "id": "check_new_user",
      "type": "branch",
      "params": {
        "condition": "not exists({user_profile}) or get({user_profile}, 'onboarding_completed', false) == false",
        "true_scenario": "ai_path_onboarding_flow_v2",
        "false_step": "detect_intent"
      }
    },
    {
      "id": "detect_intent",
      "type": "branch",
      "params": {
        "condition": "contains(lower({message_text}), '–ª–∞–π—Ñ—Ö–∞–∫') or contains(lower({message_text}), '—Å–æ–≤–µ—Ç')",
        "true_scenario": "lifehack_generator_flow_v2",
        "false_step": "check_mentor"
      }
    },
    {
      "id": "check_mentor",
      "type": "branch",
      "params": {
        "condition": "contains(lower({message_text}), '–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫') or contains(lower({message_text}), '—É—Ä–æ–∫') or contains(lower({message_text}), '–º–∞—Ç–µ—Ä–∏–∞–ª') or contains(lower({message_text}), '–∫—É—Ä—Å')",
        "true_scenario": "ai_mentor_flow_v2",
        "false_step": "check_expert"
      }
    },
    {
      "id": "check_expert",
      "type": "branch",
      "params": {
        "condition": "contains(lower({message_text}), '–∑–∞–¥–∞—á–∞') or contains(lower({message_text}), '—Ä–µ—à–µ–Ω–∏–µ') or contains(lower({message_text}), '—ç–∫—Å–ø–µ—Ä—Ç') or contains(lower({message_text}), '–ø—Ä–æ–±–ª–µ–º–∞')",
        "true_scenario": "neuroexpert_flow_v2",
        "false_step": "check_coach"
      }
    },
    {
      "id": "check_coach",
      "type": "branch",
      "params": {
        "condition": "contains(lower({message_text}), '—Ü–µ–ª—å') or contains(lower({message_text}), '–∫–æ—É—á') or contains(lower({message_text}), '—Ä–µ—Ñ–ª–µ–∫—Å–∏—è') or contains(lower({message_text}), '–º–æ—Ç–∏–≤–∞—Ü–∏—è')",
        "true_scenario": "ai_coach_flow_v2",
        "false_step": "check_digest"
      }
    },
    {
      "id": "check_digest",
      "type": "branch",
      "params": {
        "condition": "contains(lower({message_text}), '–Ω–æ–≤–æ—Å—Ç–∏') or contains(lower({message_text}), '–¥–∞–π–¥–∂–µ—Å—Ç') or contains(lower({message_text}), '–∏–∏') or contains(lower({message_text}), 'ai')",
        "true_scenario": "idigest_flow_v2",
        "false_step": "check_plan"
      }
    },
    {
      "id": "check_plan",
      "type": "branch",
      "params": {
        "condition": "contains(lower({message_text}), '–ø–ª–∞–Ω') or contains(lower({message_text}), '–æ–±—É—á–µ–Ω–∏–µ') or contains(lower({message_text}), '–ø—É—Ç—å')",
        "true_scenario": "ai_path_onboarding_flow_v2",
        "false_step": "default_lifehack"
      }
    },
    {
      "id": "default_lifehack",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "lifehack_generator_flow_v2",
        "preserve_context": true
      },
      "next_step": "end"
    },
    {
      "id": "end",
      "type": "end"
    }
  ],
  
  "initial_context": {
    "system_name": "–õ–∞–π–∫–ü—Ä–æ–≤–æ–¥–Ω–∏–∫ v2.0",
    "version": "2.0",
    "platform": "Universal Agent Platform"
  }
} 