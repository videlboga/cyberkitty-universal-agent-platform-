{
  "scenario_id": "ai_coach_flow",
  "name": "AI-–∫–æ—É—á",
  "description": "–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ—É—á–∏–Ω–≥, —Ä–µ—Ñ–ª–µ–∫—Å–∏—è –∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–ª–µ–π –≤ –æ–±—É—á–µ–Ω–∏–∏",
  "version": "1.0",
  
  "steps": [
    {
      "id": "start",
      "type": "start",
      "next_step": "load_user_context"
    },
    {
      "id": "load_user_context",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_mongo_find_data",
        "context_updates": {
          "collection": "users",
          "filter": {"user_id": "{user_id}"},
          "find_one": true,
          "output_var": "user_profile"
        }
      },
      "next_step": "load_progress_history"
    },
    {
      "id": "load_progress_history",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_mongo_find_data",
        "context_updates": {
          "collection": "coaching_sessions",
          "filter": {"user_id": "{user_id}"},
          "sort": {"created_at": -1},
          "limit": 5,
          "output_var": "coaching_history"
        }
      },
      "next_step": "log_session"
    },
    {
      "id": "log_session",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_log_message",
        "context_updates": {
          "message": "AI-–∫–æ—É—á: –Ω–∞—á–∞—Ç–∞ —Å–µ—Å—Å–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º {user_id}: {message_text}",
          "level": "INFO",
          "category": "ai_coach"
        }
      },
      "next_step": "detect_coaching_intent"
    },
    {
      "id": "detect_coaching_intent",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_llm_query",
        "context_updates": {
          "prompt": "–û–ø—Ä–µ–¥–µ–ª–∏ —Ç–∏–ø –∫–æ—É—á–∏–Ω–≥–æ–≤–æ–π —Å–µ—Å—Å–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:\n\n–ó–∞–ø—Ä–æ—Å: {message_text}\n\n–í–æ–∑–º–æ–∂–Ω—ã–µ —Ç–∏–ø—ã:\n1. goal_setting - –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–ª–µ–π\n2. reflection - —Ä–µ—Ñ–ª–µ–∫—Å–∏—è –∏ –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n3. motivation - –º–æ—Ç–∏–≤–∞—Ü–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞\n4. planning - –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è\n5. problem_solving - —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –≤ –æ–±—É—á–µ–Ω–∏–∏\n\n–û—Ç–≤–µ—Ç—å –æ–¥–Ω–∏–º —Å–ª–æ–≤–æ–º —Ç–∏–ø–æ–º —Å–µ—Å—Å–∏–∏.",
          "model": "meta-llama/llama-3.2-70b-instruct",
          "temperature": 0.1,
          "max_tokens": 50,
          "output_var": "coaching_type"
        }
      },
      "next_step": "route_by_type"
    },
    {
      "id": "route_by_type",
      "type": "conditional_branch",
      "params": {
        "condition": "{coaching_type} == 'goal_setting'",
        "if_true_step": "goal_setting_session",
        "if_false_step": "check_reflection"
      }
    },
    {
      "id": "check_reflection",
      "type": "conditional_branch",
      "params": {
        "condition": "{coaching_type} == 'reflection'",
        "if_true_step": "reflection_session",
        "if_false_step": "check_motivation"
      }
    },
    {
      "id": "check_motivation",
      "type": "conditional_branch",
      "params": {
        "condition": "{coaching_type} == 'motivation'",
        "if_true_step": "motivation_session",
        "if_false_step": "check_planning"
      }
    },
    {
      "id": "check_planning",
      "type": "conditional_branch",
      "params": {
        "condition": "{coaching_type} == 'planning'",
        "if_true_step": "planning_session",
        "if_false_step": "problem_solving_session"
      }
    },
    {
      "id": "goal_setting_session",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_llm_query",
        "context_updates": {
          "prompt": "–ü—Ä–æ–≤–µ–¥–∏ –∫–æ—É—á–∏–Ω–≥–æ–≤—É—é —Å–µ—Å—Å–∏—é –ø–æ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Ü–µ–ª–µ–π:\n\n–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {message_text}\n–ü—Ä–æ—Ñ–∏–ª—å: {user_profile}\n–ò—Å—Ç–æ—Ä–∏—è –∫–æ—É—á–∏–Ω–≥–∞: {coaching_history}\n\n–ö–∞–∫ AI-–∫–æ—É—á:\n1. –ü–æ–º–æ–≥–∏ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å SMART-—Ü–µ–ª–∏\n2. –†–∞–∑–±–µ–π –±–æ–ª—å—à–∏–µ —Ü–µ–ª–∏ –Ω–∞ –ø–æ–¥—Ü–µ–ª–∏\n3. –û–ø—Ä–µ–¥–µ–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏\n4. –ü—Ä–µ–¥–ª–æ–∂–∏ –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞\n5. –°–æ–∑–¥–∞–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π\n\n–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ—É—á–∏–Ω–≥–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ —Ç–µ—Ö–Ω–∏–∫–∏. –§–æ—Ä–º–∞—Ç: HTML —Å —ç–º–æ–¥–∑–∏.",
          "model": "meta-llama/llama-3.2-70b-instruct",
          "temperature": 0.4,
          "max_tokens": 1500,
          "output_var": "coaching_response"
        }
      },
      "next_step": "save_session"
    },
    {
      "id": "reflection_session",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_llm_query",
        "context_updates": {
          "prompt": "–ü—Ä–æ–≤–µ–¥–∏ —Ä–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω—É—é –∫–æ—É—á–∏–Ω–≥–æ–≤—É—é —Å–µ—Å—Å–∏—é:\n\n–ó–∞–ø—Ä–æ—Å: {message_text}\n–ü—Ä–æ—Ñ–∏–ª—å: {user_profile}\n–ò—Å—Ç–æ—Ä–∏—è: {coaching_history}\n\n–ö–∞–∫ AI-–∫–æ—É—á –ø–æ–º–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:\n1. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å\n2. –í—ã—è–≤–∏—Ç—å —É—Å–ø–µ—Ö–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è\n3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è\n4. –ò–∑–≤–ª–µ—á—å —É—Ä–æ–∫–∏ –∏–∑ –æ–ø—ã—Ç–∞\n5. –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥ –∫ –æ–±—É—á–µ–Ω–∏—é\n\n–ó–∞–¥–∞–≤–∞–π –æ—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –≥–ª—É–±–æ–∫–æ–π —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏. –§–æ—Ä–º–∞—Ç: HTML —Å —ç–º–æ–¥–∑–∏.",
          "model": "meta-llama/llama-3.2-70b-instruct",
          "temperature": 0.4,
          "max_tokens": 1500,
          "output_var": "coaching_response"
        }
      },
      "next_step": "save_session"
    },
    {
      "id": "motivation_session",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_llm_query",
        "context_updates": {
          "prompt": "–ü—Ä–æ–≤–µ–¥–∏ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—É—é –∫–æ—É—á–∏–Ω–≥–æ–≤—É—é —Å–µ—Å—Å–∏—é:\n\n–ó–∞–ø—Ä–æ—Å: {message_text}\n–ü—Ä–æ—Ñ–∏–ª—å: {user_profile}\n–ò—Å—Ç–æ—Ä–∏—è: {coaching_history}\n\n–ö–∞–∫ AI-–∫–æ—É—á:\n1. –í—ã—è–≤–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–µ–º–æ—Ç–∏–≤–∞—Ü–∏–∏\n2. –ù–∞–ø–æ–º–Ω–∏ –æ —Ü–µ–ª—è—Ö –∏ –º–µ—á—Ç–∞—Ö\n3. –ü–æ–∫–∞–∂–∏ —É–∂–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å\n4. –ü—Ä–µ–¥–ª–æ–∂–∏ —Ç–µ—Ö–Ω–∏–∫–∏ –º–æ—Ç–∏–≤–∞—Ü–∏–∏\n5. –°–æ–∑–¥–∞–π –ø–ª–∞–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —ç–Ω—Ç—É–∑–∏–∞–∑–º–∞\n\n–ë—É–¥—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–º. –§–æ—Ä–º–∞—Ç: HTML —Å —ç–º–æ–¥–∑–∏.",
          "model": "meta-llama/llama-3.2-70b-instruct",
          "temperature": 0.5,
          "max_tokens": 1500,
          "output_var": "coaching_response"
        }
      },
      "next_step": "save_session"
    },
    {
      "id": "planning_session",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_llm_query",
        "context_updates": {
          "prompt": "–ü—Ä–æ–≤–µ–¥–∏ —Å–µ—Å—Å–∏—é –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è:\n\n–ó–∞–ø—Ä–æ—Å: {message_text}\n–ü—Ä–æ—Ñ–∏–ª—å: {user_profile}\n–ò—Å—Ç–æ—Ä–∏—è: {coaching_history}\n\n–ö–∞–∫ AI-–∫–æ—É—á –ø–æ–º–æ–≥–∏:\n1. –û—Ü–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å–∏—Ç—É–∞—Ü–∏—é\n2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã\n3. –°–æ–∑–¥–∞—Ç—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø–ª–∞–Ω\n4. –£—á–µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏\n5. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è\n\n–§–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏–º–æ—Å—Ç–∏. –§–æ—Ä–º–∞—Ç: HTML —Å —ç–º–æ–¥–∑–∏.",
          "model": "meta-llama/llama-3.2-70b-instruct",
          "temperature": 0.3,
          "max_tokens": 1500,
          "output_var": "coaching_response"
        }
      },
      "next_step": "save_session"
    },
    {
      "id": "problem_solving_session",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_llm_query",
        "context_updates": {
          "prompt": "–ü—Ä–æ–≤–µ–¥–∏ —Å–µ—Å—Å–∏—é —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –≤ –æ–±—É—á–µ–Ω–∏–∏:\n\n–ü—Ä–æ–±–ª–µ–º–∞: {message_text}\n–ü—Ä–æ—Ñ–∏–ª—å: {user_profile}\n–ò—Å—Ç–æ—Ä–∏—è: {coaching_history}\n\n–ö–∞–∫ AI-–∫–æ—É—á:\n1. –ü–æ–º–æ–≥–∏ —á–µ—Ç–∫–æ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É\n2. –ù–∞–π–¥–∏ –∫–æ—Ä–Ω–µ–≤—ã–µ –ø—Ä–∏—á–∏–Ω—ã\n3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏–π\n4. –û—Ü–µ–Ω–∏ –ø–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã –∫–∞–∂–¥–æ–≥–æ\n5. –°–æ–∑–¥–∞–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π\n\n–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ—É—á–∏–Ω–≥–æ–≤—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º. –§–æ—Ä–º–∞—Ç: HTML —Å —ç–º–æ–¥–∑–∏.",
          "model": "meta-llama/llama-3.2-70b-instruct",
          "temperature": 0.4,
          "max_tokens": 1500,
          "output_var": "coaching_response"
        }
      },
      "next_step": "save_session"
    },
    {
      "id": "save_session",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_mongo_save_data",
        "context_updates": {
          "collection": "coaching_sessions",
          "document": {
            "user_id": "{user_id}",
            "chat_id": "{chat_id}",
            "session_type": "{coaching_type}",
            "user_request": "{message_text}",
            "coach_response": "{coaching_response}",
            "created_at": "{current_time}"
          }
        }
      },
      "next_step": "send_response"
    },
    {
      "id": "send_response",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_telegram_send_message",
        "context_updates": {
          "text": "üéØ <b>–°–µ—Å—Å–∏—è —Å AI-–∫–æ—É—á–µ–º:</b>\n\n{coaching_response}",
          "parse_mode": "HTML"
        }
      },
      "next_step": "offer_followup"
    },
    {
      "id": "offer_followup",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_telegram_send_buttons",
        "context_updates": {
          "text": "üí≠ <b>–ß—Ç–æ –¥–∞–ª—å—à–µ?</b>",
          "buttons": [
            [{"text": "üìù –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π", "callback_data": "create_action_plan"}],
            [{"text": "‚è∞ –ù–∞–ø–æ–º–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é", "callback_data": "schedule_reminder"}],
            [{"text": "üìä –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å", "callback_data": "show_progress"}],
            [{"text": "‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é", "callback_data": "end_session"}]
          ]
        }
      },
      "next_step": "wait_followup_choice"
    },
    {
      "id": "wait_followup_choice",
      "type": "input",
      "params": {
        "input_type": "callback_query",
        "timeout_seconds": 120,
        "output_var": "followup_choice"
      },
      "next_step": "handle_followup"
    },
    {
      "id": "handle_followup",
      "type": "conditional_branch",
      "params": {
        "condition": "{followup_choice} == 'create_action_plan'",
        "if_true_step": "create_action_plan",
        "if_false_step": "check_reminder"
      }
    },
    {
      "id": "check_reminder",
      "type": "conditional_branch",
      "params": {
        "condition": "{followup_choice} == 'schedule_reminder'",
        "if_true_step": "schedule_reminder",
        "if_false_step": "check_progress"
      }
    },
    {
      "id": "check_progress",
      "type": "conditional_branch",
      "params": {
        "condition": "{followup_choice} == 'show_progress'",
        "if_true_step": "show_progress",
        "if_false_step": "end"
      }
    },
    {
      "id": "create_action_plan",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_llm_query",
        "context_updates": {
          "prompt": "–°–æ–∑–¥–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ—É—á–∏–Ω–≥–æ–≤–æ–π —Å–µ—Å—Å–∏–∏:\n\n–¢–∏–ø —Å–µ—Å—Å–∏–∏: {coaching_type}\n–û—Ç–≤–µ—Ç –∫–æ—É—á–∞: {coaching_response}\n\n–°–æ–∑–¥–∞–π:\n1. –°–ø–∏—Å–æ–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π\n2. –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ\n3. –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞\n4. –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏\n\n–§–æ—Ä–º–∞—Ç: HTML —Å —ç–º–æ–¥–∑–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫.",
          "model": "meta-llama/llama-3.2-70b-instruct",
          "temperature": 0.2,
          "max_tokens": 1000,
          "output_var": "action_plan"
        }
      },
      "next_step": "send_action_plan"
    },
    {
      "id": "send_action_plan",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_telegram_send_message",
        "context_updates": {
          "text": "üìã <b>–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:</b>\n\n{action_plan}",
          "parse_mode": "HTML"
        }
      },
      "next_step": "end"
    },
    {
      "id": "schedule_reminder",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_scheduler_create_task",
        "context_updates": {
          "scenario_id": "coaching_followup_reminder",
          "delay_minutes": 10080,
          "task_context": {
            "reminder_type": "coaching_followup",
            "session_type": "{coaching_type}",
            "previous_response": "{coaching_response}"
          }
        }
      },
      "next_step": "confirm_reminder"
    },
    {
      "id": "confirm_reminder",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_telegram_send_message",
        "context_updates": {
          "text": "‚è∞ <b>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!</b>\n\n–Ø –Ω–∞–ø–æ–º–Ω—é —Ç–µ–±–µ —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –Ω–∞—à–µ–π —Å–µ—Å—Å–∏–∏ –∏ –ø–æ–º–æ–≥—É –æ—Ü–µ–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å.",
          "parse_mode": "HTML"
        }
      },
      "next_step": "end"
    },
    {
      "id": "show_progress",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_llm_query",
        "context_updates": {
          "prompt": "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ—É—á–∏–Ω–≥–∞:\n\n–ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π: {coaching_history}\n–¢–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è: {coaching_response}\n\n–ü–æ–∫–∞–∂–∏:\n1. –î–∏–Ω–∞–º–∏–∫—É —Ä–∞–∑–≤–∏—Ç–∏—è\n2. –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏\n3. –û–±–ª–∞—Å—Ç–∏ —Ä–æ—Å—Ç–∞\n4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ\n\n–§–æ—Ä–º–∞—Ç: HTML —Å —ç–º–æ–¥–∑–∏, –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π —Ç–æ–Ω.",
          "model": "meta-llama/llama-3.2-70b-instruct",
          "temperature": 0.3,
          "max_tokens": 1000,
          "output_var": "progress_analysis"
        }
      },
      "next_step": "send_progress"
    },
    {
      "id": "send_progress",
      "type": "switch_scenario",
      "params": {
        "target_scenario": "atomic_telegram_send_message",
        "context_updates": {
          "text": "üìà <b>–¢–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å:</b>\n\n{progress_analysis}",
          "parse_mode": "HTML"
        }
      },
      "next_step": "end"
    },
    {
      "id": "end",
      "type": "end"
    }
  ]
} 