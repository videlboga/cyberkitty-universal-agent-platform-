{
  "name": "–ê–≥–µ–Ω—Ç-—ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ò–ò",
  "description": "–°—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –∞–≥–µ–Ω—Ç–∞-—ç–∫—Å–ø–µ—Ä—Ç–∞ –ø–æ –ò–ò —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ LLM –∏ RAG –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.",
  "created_at": "2025-05-14T12:30:00Z",
  "steps": [
    {
      "id": "welcome",
      "type": "telegram_message",
      "message": "üë®‚Äçüî¨ –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É –∏ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º. –ó–∞–¥–∞–π—Ç–µ –º–Ω–µ –≤–æ–ø—Ä–æ—Å –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ, –∏ —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –¥–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.",
      "next_step": "wait_for_query"
    },
    {
      "id": "wait_for_query",
      "type": "input",
      "prompt": "–í–∞—à –≤–æ–ø—Ä–æ—Å –ø–æ —Ç–µ–º–µ –ò–ò –∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π:",
      "output_var": "user_query",
      "next_step": "search_knowledge_base"
    },
    {
      "id": "search_knowledge_base",
      "type": "rag_search",
      "query": "{user_query}",
      "collection_name": "ai_knowledge_base",
      "output_var": "rag_results",
      "next_step": "process_with_llm"
    },
    {
      "id": "process_with_llm",
      "type": "llm_query",
      "prompt": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: {user_query}\n\n–í–æ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É:\n{rag_results}\n\n–ù–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —Ç–≤–æ–∏—Ö –∑–Ω–∞–Ω–∏–π, –¥–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–π –∏ —Ç–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç.",
      "system_prompt": "–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É –∏ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ—á–Ω—ã–µ, –Ω–∞—É—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ. –û–ø–∏—Ä–∞–π—Å—è –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π, –Ω–æ –¥–æ–ø–æ–ª–Ω—è–π –µ—ë —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Å–ø–∏—Å–∫–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ï—Å–ª–∏ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —á–µ—Å—Ç–Ω–æ —É–∫–∞–∂–∏ —ç—Ç–æ, –Ω–æ –ø–æ–ø—ã—Ç–∞–π—Å—è –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–∞—Ç—å –ø–æ–ª–µ–∑–Ω—ã–π –æ—Ç–≤–µ—Ç.",
      "model": "openai/gpt-4o",
      "temperature": 0.3,
      "max_tokens": 800,
      "output_var": "expert_response",
      "next_step": "send_response"
    },
    {
      "id": "send_response",
      "type": "telegram_message",
      "message": "{expert_response.response}",
      "next_step": "ask_followup"
    },
    {
      "id": "ask_followup",
      "type": "telegram_message",
      "message": "\n\n–ú–æ–≥—É –ª–∏ —è –æ—Ç–≤–µ—Ç–∏—Ç—å –µ—â—ë –Ω–∞ –∫–∞–∫–∏–µ-—Ç–æ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ —É—Ç–æ—á–Ω–∏—Ç—å —á—Ç–æ-—Ç–æ –≤ –º–æ—ë–º –æ—Ç–≤–µ—Ç–µ?",
      "next_step": "wait_for_followup"
    },
    {
      "id": "wait_for_followup",
      "type": "input",
      "prompt": "–í–∞—à –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å (–∏–ª–∏ '–Ω–µ—Ç', –µ—Å–ª–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç):",
      "output_var": "user_followup",
      "next_step": "check_followup"
    },
    {
      "id": "check_followup",
      "type": "branch",
      "branches": [
        {
          "condition": "{user_followup.lower() == '–Ω–µ—Ç' or user_followup.lower() == 'no' or user_followup.lower() == 'n'}",
          "next_step": "end_conversation"
        },
        {
          "condition": "default",
          "next_step": "process_followup"
        }
      ]
    },
    {
      "id": "process_followup",
      "type": "llm_query",
      "prompt": "–ü—Ä–µ–¥—ã–¥—É—â–∏–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {user_query}\n–ú–æ–π –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ—Ç–≤–µ—Ç: {expert_response.response}\n\n–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {user_followup}\n\n–î–∞–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —É—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å.",
      "system_prompt": "–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É –∏ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ—á–Ω—ã–µ, –Ω–∞—É—á–Ω–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ. –°–µ–π—á–∞—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞–ª —É—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Ç–µ–º–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞. –î–∞–π –¥–µ—Ç–∞–ª—å–Ω—ã–π –∏ —Å–≤—è–∑–Ω—ã–π –æ—Ç–≤–µ—Ç, —É—á–∏—Ç—ã–≤–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ–±—Å—É–∂–¥–µ–Ω–∏—è.",
      "model": "openai/gpt-4o",
      "temperature": 0.3,
      "max_tokens": 600,
      "output_var": "followup_response",
      "next_step": "send_followup_response"
    },
    {
      "id": "send_followup_response",
      "type": "telegram_message",
      "message": "{followup_response.response}",
      "next_step": "ask_more_questions"
    },
    {
      "id": "ask_more_questions",
      "type": "telegram_message",
      "message": "\n\n–ï—Å—Ç—å –ª–∏ —É –≤–∞—Å –µ—â—ë –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–º–µ –ò–ò –∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π?",
      "next_step": "final_branch"
    },
    {
      "id": "final_branch",
      "type": "branch",
      "branches": [
        {
          "condition": "{user_more_questions == '–¥–∞' or user_more_questions == '–î–∞' or user_more_questions == '–î–ê' or user_more_questions == 'yes' or user_more_questions == 'Yes'}",
          "next_step": "wait_for_query"
        },
        {
          "condition": "default",
          "next_step": "end_conversation"
        }
      ]
    },
    {
      "id": "end_conversation",
      "type": "telegram_message",
      "message": "–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ! –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –¥—Ä—É–≥–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É –∏ –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º, —è –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å. –ñ–µ–ª–∞—é –≤–∞–º —É—Å–ø–µ—Ö–æ–≤ –≤ –∏–∑—É—á–µ–Ω–∏–∏ —ç—Ç–æ–π —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏!"
    }
  ]
} 