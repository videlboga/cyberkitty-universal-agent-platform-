# üéØ Universal Agent Platform

**–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ò–ò-–∞–≥–µ–Ω—Ç–æ–≤**

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ü–†–û–°–¢–û–¢–ê –ü–†–ï–í–´–®–ï –í–°–ï–ì–û! 

> ‚úÖ **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω!** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–µ–Ω–∞ –Ω–∞ 70%. –í—Å–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ `archive/`.

## üèóÔ∏è –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
SimpleScenarioEngine (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫)
‚îú‚îÄ‚îÄ –ë–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (start, end, action, input, conditional_execute)
‚îî‚îÄ‚îÄ –ü–ª–∞–≥–∏–Ω-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
    ‚îú‚îÄ‚îÄ SimpleTelegramPlugin (telegram_send_message, telegram_send_buttons)
    ‚îú‚îÄ‚îÄ MongoPlugin (mongo_save, mongo_get)
    ‚îî‚îÄ‚îÄ SimpleOrchestratorPlugin (switch_scenario)

SimpleTelegramIntegration (–µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–ª–æ–π)
‚îî‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö Telegram —Å–æ–±—ã—Ç–∏–π

Simple API (app/api/simple.py)
‚îî‚îÄ‚îÄ POST /agents/{agent_id}/execute (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π endpoint)
```

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. ‚úÖ **–û–¥–∏–Ω –¥–≤–∏–∂–æ–∫** –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞
2. ‚úÖ **–ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤** —á–µ—Ä–µ–∑ BasePlugin
3. ‚úÖ **–û–¥–∏–Ω API endpoint** –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞
4. ‚úÖ **–ú–∏–Ω–∏–º—É–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** –∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π
5. ‚úÖ **–Ø–≤–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
6. ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –¥–≤–∏–∂–æ–∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω, –ø–ª–∞–≥–∏–Ω—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
```
app/
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ simple_engine.py              # –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ base_plugin.py                # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –ø–ª–∞–≥–∏–Ω–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ simple_telegram_integration.py # Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ plugins/
‚îÇ   ‚îú‚îÄ‚îÄ simple_telegram_plugin.py     # Telegram –ø–ª–∞–≥–∏–Ω
‚îÇ   ‚îú‚îÄ‚îÄ mongo_plugin.py               # MongoDB –ø–ª–∞–≥–∏–Ω
‚îÇ   ‚îî‚îÄ‚îÄ simple_orchestrator_plugin.py # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ simple.py                     # –ï–¥–∏–Ω—ã–π API
‚îú‚îÄ‚îÄ simple_dependencies.py            # –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ simple_main.py                    # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
```

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:
- `telegram_scenario_refactored.js` - –î–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–π –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `test_refactored_architecture.py` - –¢–µ—Å—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- `REFACTORING_REPORT.md` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á—ë—Ç –æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ

### –ê—Ä—Ö–∏–≤:
- `archive/` - –í—Å–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (70% –∫–æ–¥–∞)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
export TELEGRAM_BOT_TOKEN="your_bot_token"
export MONGODB_URI="mongodb://localhost:27017"
```

### 3. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Å—Ç–æ–≥–æ API
python app/simple_main.py

# –ò–ª–∏ –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python test_refactored_architecture.py
```

## üìã API

### –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π endpoint:

**POST /agents/{agent_id}/execute**

```json
{
  "user_id": "123456789",
  "chat_id": "987654321", 
  "context": {
    "user_name": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
    "message_text": "/start"
  }
}
```

**Response:**
```json
{
  "success": true,
  "scenario_id": "simple_telegram",
  "final_context": {...},
  "message": "–°—Ü–µ–Ω–∞—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ"
}
```

## üé¨ –¢–∏–ø—ã —à–∞–≥–æ–≤ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –ë–∞–∑–æ–≤—ã–µ (–≤ –¥–≤–∏–∂–∫–µ):
- `start` - –ù–∞—á–∞–ª–æ —Å—Ü–µ–Ω–∞—Ä–∏—è
- `end` - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è  
- `action` - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
- `input` - –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞
- `conditional_execute` - –£—Å–ª–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞

### Telegram (–≤ –ø–ª–∞–≥–∏–Ω–µ):
- `telegram_send_message` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- `telegram_send_buttons` - –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–Ω–æ–ø–æ–∫
- `telegram_edit_message` - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

### MongoDB (–≤ –ø–ª–∞–≥–∏–Ω–µ):
- `mongo_save` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `mongo_get` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è (–≤ –ø–ª–∞–≥–∏–Ω–µ):
- `switch_scenario` - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

## üìù –ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è

```javascript
{
  "scenario_id": "simple_demo",
  "steps": [
    {
      "id": "start",
      "type": "start",                    // –ë–∞–∑–æ–≤—ã–π —Ç–∏–ø - –≤ –¥–≤–∏–∂–∫–µ
      "next_step": "welcome"
    },
    {
      "id": "welcome", 
      "type": "telegram_send_message",    // –ü–ª–∞–≥–∏–Ω-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π —Ç–∏–ø
      "params": {
        "chat_id": "{chat_id}",
        "text": "–ü—Ä–∏–≤–µ—Ç, {user_name}!"
      },
      "next_step": "check_role"
    },
    {
      "id": "check_role",
      "type": "conditional_execute",      // –ë–∞–∑–æ–≤—ã–π —Ç–∏–ø - –≤ –¥–≤–∏–∂–∫–µ
      "params": {
        "condition": "user_role == 'admin'",
        "true_step": "admin_menu",
        "false_step": "user_menu"
      }
    },
    {
      "id": "end",
      "type": "end"                       // –ë–∞–∑–æ–≤—ã–π —Ç–∏–ø - –≤ –¥–≤–∏–∂–∫–µ
    }
  ]
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
python test_refactored_architecture.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
curl http://localhost:8080/simple/health
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----|----|-----------|
| –§–∞–π–ª–æ–≤ | 78 | 24 | -70% |
| –î–≤–∏–∂–∫–æ–≤ | 5 | 1 | -80% |
| API endpoints | 9 | 1 | -89% |
| –ü–ª–∞–≥–∏–Ω–æ–≤ | 14 | 3 | -79% |

## üö´ –ß—Ç–æ –ù–ï –Ω—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å

- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–≤–∏–∂–∫–∏ (atomic, extensible, hybrid, unified)
- –°–ª–æ–∂–Ω—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã –∏ –æ–±—ë—Ä—Ç–∫–∏  
- –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è API endpoints
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- –°–ª–æ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–í—Å–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `archive/` –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏.**

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `REFACTORING_REPORT.md` - –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á—ë—Ç –æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
- `archive/README.md` - –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `telegram_scenario_refactored.js` - –î–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–π

---

**–ü–æ–º–Ω–∏—Ç–µ: –ü—Ä–æ—Å—Ç–æ—Ç–∞ –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ!** üéØ 