{
  "scenario_id": "test_advanced_plugins",
  "name": "–¢–µ—Å—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤",
  "description": "–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç LLM, RAG –∏ MongoDB –ø–ª–∞–≥–∏–Ω–æ–≤ Universal Agent System",
  "version": "1.0",
  "initial_context": {
    "test_user": "advanced_tester",
    "test_query": "–ß—Ç–æ —Ç–∞–∫–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç?"
  },
  "steps": [
    {
      "id": "start",
      "type": "start",
      "next_step": "log_start"
    },
    {
      "id": "log_start", 
      "type": "log",
      "params": {
        "message": "üöÄ –ù–ê–ß–ò–ù–ê–ï–ú –¢–ï–°–¢ –ü–†–û–î–í–ò–ù–£–¢–´–• –ü–õ–ê–ì–ò–ù–û–í!",
        "level": "INFO"
      },
      "next_step": "test_mongodb_insert"
    },
    {
      "id": "test_mongodb_insert",
      "type": "mongo_insert_one",
      "params": {
        "collection": "test_advanced_data",
        "document": {
          "test_type": "advanced_plugins",
          "user_id": "{{ test_user }}",
          "timestamp": "{{ current_timestamp }}",
          "status": "testing_mongodb"
        },
        "output_var": "mongo_insert_result"
      },
      "next_step": "test_llm_query"
    },
    {
      "id": "test_llm_query",
      "type": "llm_query", 
      "params": {
        "prompt": "{{ test_query }}",
        "model": "deepseek/deepseek-chat-v3-0324",
        "max_tokens": 150,
        "temperature": 0.7,
        "output_var": "llm_response"
      },
      "next_step": "test_rag_search"
    },
    {
      "id": "test_rag_search",
      "type": "rag_search",
      "params": {
        "query": "{{ test_query }}",
        "top_k": 3,
        "output_var": "rag_results"
      },
      "next_step": "test_mongodb_update"
    },
    {
      "id": "test_mongodb_update",
      "type": "mongo_update_one",
      "params": {
        "collection": "test_advanced_data",
        "filter": {
          "test_type": "advanced_plugins",
          "user_id": "{{ test_user }}"
        },
        "update": {
          "$set": {
            "status": "completed",
            "llm_tested": true,
            "rag_tested": true,
            "completed_at": "{{ current_timestamp }}"
          }
        },
        "output_var": "mongo_update_result"
      },
      "next_step": "send_telegram_results"
    },
    {
      "id": "send_telegram_results",
      "type": "telegram_send_message",
      "params": {
        "chat_id": "648981358",
        "text": "üéâ –¢–ï–°–¢ –ü–†–û–î–í–ò–ù–£–¢–´–• –ü–õ–ê–ì–ò–ù–û–í –ó–ê–í–ï–†–®–ï–ù!\n\n‚úÖ MongoDB: –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã\n‚úÖ LLM: –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω\n‚úÖ RAG: –ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω\n‚úÖ Telegram: –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ\n\n–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞!"
      },
      "next_step": "end"
    },
    {
      "id": "end",
      "type": "end"
    }
  ]
} 