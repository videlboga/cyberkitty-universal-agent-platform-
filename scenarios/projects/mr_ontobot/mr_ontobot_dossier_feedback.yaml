scenario_id: "mr_ontobot_dossier_feedback"
name: "–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ –î–æ—Å—å–µ"
description: "–°—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–æ—Å—å–µ, –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ü–µ–Ω–∫–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –ø—Ä–æ–¥–∞–∂–∞–º"

initial_context:
  dossier_sent: false
  feedback_received: false
  user_rating: null

steps:
  - id: start
    type: start
    next_step: generate_and_send_dossier

  - id: generate_and_send_dossier
    type: llm_chat
    params:
      messages:
        - role: "system"
          content: "–¢—ã –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞ Onto Nothing, —Å–æ–∑–¥–∞—é—â–∏–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ—Å—å–µ –º—ã—Å–ª–µ–≤–∏—Ä—É—Å–æ–≤."
        - role: "user"
          content: |
            –°–æ–∑–¥–∞–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–µ –¥–æ—Å—å–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –µ–≥–æ –æ—Ç–≤–µ—Ç–æ–≤ –æ –º—ã—Å–ª–µ–≤–∏—Ä—É—Å–∞—Ö:

            –°—Ñ–µ—Ä–∞ "–Ø-–Ø": {ya_ya_response}
            –°—Ñ–µ—Ä–∞ "–Ø-–î–µ–ª–æ": {ya_delo_response}  
            –°—Ñ–µ—Ä–∞ "–Ø-–û—Ç–Ω–æ—à–µ–Ω–∏—è": {ya_relations_response}

            –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ—Å—å–µ:
            1. –ê–ù–ê–õ–ò–ó –ú–´–°–õ–ï–í–ò–†–£–°–û–í
            - –ì–ª–∞–≤–Ω—ã–µ –º—ã—Å–ª–µ–≤–∏—Ä—É—Å—ã –≤ –∫–∞–∂–¥–æ–π —Å—Ñ–µ—Ä–µ
            - –ò—Ö –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –∂–∏–∑–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            - –°–∫—Ä—ã—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Å–≤—è–∑–∏

            2. –ü–†–û–ì–ù–û–ó –ù–ê 1-3-5 –õ–ï–¢
            - –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è
            - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –¥–ª—è –∫–∞—Ä—å–µ—Ä—ã, –æ—Ç–Ω–æ—à–µ–Ω–∏–π, —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏

            3. –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò
            - –ü–µ—Ä–≤–æ–æ—á–µ—Ä–µ–¥–Ω—ã–µ —à–∞–≥–∏
            - –°–ø–æ—Å–æ–±—ã –Ω–µ–π—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö –º—ã—Å–ª–µ–≤–∏—Ä—É—Å–æ–≤
            - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏

            –¢–æ–Ω: –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π, –Ω–æ –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–π. –û–±—ä–µ–º: 2000-3000 —Å–ª–æ–≤.
      model: "gpt-4"
      temperature: 0.7
      output_var: "dossier_content"
    next_step: save_dossier

  - id: save_dossier
    type: mongo_insert_document
    params:
      collection: "user_dossiers"
      document:
        user_id: "{user_id}"
        chat_id: "{chat_id}"
        session_id: "{session_id}"
        dossier_content: "{dossier_content}"
        generated_at: "{current_timestamp}"
        ya_ya_response: "{ya_ya_response}"
        ya_delo_response: "{ya_delo_response}"
        ya_relations_response: "{ya_relations_response}"
    next_step: generate_pdf

  - id: generate_pdf
    type: pdf_generate
    params:
      content: "{dossier_content}"
      title: "–ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–µ –¥–æ—Å—å–µ –º—ã—Å–ª–µ–≤–∏—Ä—É—Å–æ–≤"
      use_logo: true
      output_var: "pdf_result"
    next_step: send_dossier_file

  - id: send_dossier_file
    type: channel_action
    params:
      action: send_document
      chat_id: "{chat_id}"
      document_path: "{pdf_result.pdf_path}"
      caption: |
        üìã –¢–≤–æ—ë –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–µ –¥–æ—Å—å–µ –≥–æ—Ç–æ–≤–æ!
        
        –í–Ω—É—Ç—Ä–∏ –Ω–∞–π–¥—ë—à—å:
        ‚úÖ –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Ç–≤–æ–∏—Ö –º—ã—Å–ª–µ–≤–∏—Ä—É—Å–æ–≤
        ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑ —Ä–∞–∑–≤–∏—Ç–∏—è –∂–∏–∑–Ω–∏ –Ω–∞ 1-3-5 –ª–µ—Ç
        ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
        
        –ò–∑—É—á–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ - —ç—Ç–æ –∫–ª—é—á –∫ –ø–æ–Ω–∏–º–∞–Ω–∏—é —Å–µ–±—è!
    next_step: update_dossier_sent

  - id: update_dossier_sent
    type: action
    params:
      action_type: "update_context"
      updates:
        dossier_sent: "{current_timestamp}"
    next_step: request_feedback

  - id: request_feedback
    type: channel_action
    params:
      action: send_buttons
      chat_id: "{chat_id}"
      text: "–ê —Ç–µ–ø–µ—Ä—å –æ—Ü–µ–Ω–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–Ω–æ –º—ã –ø–æ–ø–∞–ª–∏ –≤ —Ü–µ–ª—å?"
      buttons:
        - text: "–í—Å–µ –ø—Ä–æ –º–µ–Ω—è"
          callback_data: "rating_perfect"
        - text: "–ù–æ—Ä–º"
          callback_data: "rating_good"
        - text: "–ì–æ—Ç–æ–≤ –ø–æ—Å–ø–æ—Ä–∏—Ç—å"
          callback_data: "rating_disagree"
        - text: "–ù–µ —Å–æ–≤—Å–µ–º —Å–æ–≥–ª–∞—Å–µ–Ω"
          callback_data: "rating_partly_disagree"
        - text: "–Ø –µ—â–µ –Ω–µ –ø–æ—Å–º–æ—Ç—Ä–µ–ª –¥–æ—Å—å–µ"
          callback_data: "rating_not_viewed"
    next_step: schedule_feedback_reminders

  - id: schedule_feedback_reminders
    type: scheduler_create_task
    params:
      task_type: "send_push_reminder"
      delay_minutes: 10
      task_data:
        user_id: "{user_id}"
        chat_id: "{chat_id}"
        reminder_type: "dossier_push_1"
    next_step: schedule_reminder_2

  - id: schedule_reminder_2
    type: scheduler_create_task
    params:
      task_type: "send_push_reminder"
      delay_minutes: 240  # 4 —á–∞—Å–∞
      task_data:
        user_id: "{user_id}"
        chat_id: "{chat_id}"
        reminder_type: "dossier_push_2"
    next_step: schedule_reminder_3

  - id: schedule_reminder_3
    type: scheduler_create_task
    params:
      task_type: "send_push_reminder"
      delay_minutes: 480  # 8 —á–∞—Å–æ–≤
      task_data:
        user_id: "{user_id}"
        chat_id: "{chat_id}"
        reminder_type: "dossier_push_3"
    next_step: schedule_reminder_4

  - id: schedule_reminder_4
    type: scheduler_create_task
    params:
      task_type: "send_push_reminder"
      delay_minutes: 720  # 12 —á–∞—Å–æ–≤
      task_data:
        user_id: "{user_id}"
        chat_id: "{chat_id}"
        reminder_type: "dossier_push_4"
    next_step: wait_for_feedback

  - id: wait_for_feedback
    type: input_button
    params:
      variable: "user_rating"
      timeout_seconds: 86400  # 24 —á–∞—Å–∞
    next_step: process_feedback

  - id: process_feedback
    type: action
    params:
      action_type: "update_context"
      updates:
        feedback_received: true
        user_rating: "{user_rating}"
    next_step: save_feedback

  - id: save_feedback
    type: mongo_insert_document
    params:
      collection: "user_feedback"
      document:
        user_id: "{user_id}"
        chat_id: "{chat_id}"
        session_id: "{session_id}"
        rating: "{user_rating}"
        feedback_at: "{current_timestamp}"
    next_step: update_amocrm_feedback

  - id: update_amocrm_feedback
    type: amocrm_update_contact
    params:
      contact_id: "{amocrm_contact.contact_id}"
      custom_fields:
        DOSSIER_RATING: "{user_rating}"
        DOSSIER_SENT_AT: "{dossier_sent}"
        FEEDBACK_RECEIVED_AT: "{current_timestamp}"
        CURRENT_STAGE: "product_offer"
      output_var: "amocrm_update_result"
    next_step: add_feedback_note

  - id: add_feedback_note
    type: amocrm_add_note
    params:
      entity_type: "contacts"
      entity_id: "{amocrm_contact.contact_id}"
      note_type: "common"
      text: |
        üìã –î–æ—Å—å–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –æ—Ü–µ–Ω–µ–Ω–æ!
        
        üìÖ –î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: {dossier_sent}
        ‚≠ê –û—Ü–µ–Ω–∫–∞: {user_rating}
        üìÖ –î–∞—Ç–∞ –æ—Ü–µ–Ω–∫–∏: {current_timestamp}
        
        –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø: –ü—Ä–æ–¥—É–∫—Ç–æ–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
    next_step: generate_response_to_feedback

  - id: generate_response_to_feedback
    type: llm_chat
    params:
      messages:
        - role: "system"
          content: "–¢—ã –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞ Onto Nothing. –û—Ç–≤–µ—á–∞–π –¥—Ä—É–∂–µ–ª—é–±–Ω–æ –∏ –ø–æ–Ω–∏–º–∞—é—â–µ."
        - role: "user"
          content: |
            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ü–µ–Ω–∏–ª –¥–æ—Å—å–µ –∫–∞–∫: {user_rating}
            
            –û—Å–Ω–æ–≤–Ω—ã–µ –º—ã—Å–ª–µ–≤–∏—Ä—É—Å—ã –∏–∑ –¥–æ—Å—å–µ:
            - –Ø-–Ø: {ya_ya_response}
            - –Ø-–î–µ–ª–æ: {ya_delo_response}
            - –Ø-–û—Ç–Ω–æ—à–µ–Ω–∏—è: {ya_relations_response}

            –°–æ–∑–¥–∞–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç:
            1. –û—Ç—Ä–µ–∞–≥–∏—Ä—É–π –Ω–∞ –æ—Ü–µ–Ω–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            2. –í—ã–¥–µ–ª–∏ –ì–õ–ê–í–ù–´–ô –º—ã—Å–ª–µ–≤–∏—Ä—É—Å –∏–∑ –¥–æ—Å—å–µ
            3. –ü–æ–¥–≤–µ–¥–∏ –∫ –≤–æ–ø—Ä–æ—Å—É "—Ö–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å, —á—Ç–æ –¥–∞–ª—å—à–µ?"
            4. –ù–∞–º–µ–∫–Ω–∏ –Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –º—ã—Å–ª–µ–≤–∏—Ä—É—Å–∞ –Ω–∞–≤—Å–µ–≥–¥–∞

            –¢–æ–Ω: –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π, –ø–æ–Ω–∏–º–∞—é—â–∏–π. –û–±—ä–µ–º: 150-200 —Å–ª–æ–≤.
            –í –∫–æ–Ω—Ü–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–ø—Ä–æ—Å–∏: "—Ö–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å, —á—Ç–æ –¥–∞–ª—å—à–µ?"
      model: "gpt-4"
      temperature: 0.8
      output_var: "response_text"
    next_step: send_response_and_offer

  - id: send_response_and_offer
    type: channel_action
    params:
      action: send_buttons
      chat_id: "{chat_id}"
      text: "{response_text}"
      buttons:
        - text: "–ß—Ç–æ –¥–∞–ª—å—à–µ?"
          callback_data: "what_next"
    next_step: update_stage_and_switch

  - id: update_stage_and_switch
    type: action
    params:
      action_type: "update_context"
      updates:
        current_stage: "product_offer"
    next_step: wait_for_what_next

  - id: wait_for_what_next
    type: input_button
    params:
      variable: "user_choice"
      timeout_seconds: 3600  # 1 —á–∞—Å
    next_step: switch_to_product_offer

  - id: switch_to_product_offer
    type: switch_scenario
    params:
      scenario_id: "mr_ontobot_product_offer"
      preserve_context: true
    next_step: end

  # Push-–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –¥–æ—Å—å–µ
  - id: send_dossier_push_1
    type: channel_action
    params:
      action: send_buttons
      chat_id: "{chat_id}"
      text: |
        –¢–≤–æ–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–µ –¥–æ—Å—å–µ –≥–æ—Ç–æ–≤–æ. –í–Ω—É—Ç—Ä–∏ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Ç–≤–æ–∏—Ö –º—ã—Å–ª–µ–≤–∏—Ä—É—Å–æ–≤ –∏ –∫–ª—é—á –∫ –ø–æ–Ω–∏–º–∞–Ω–∏—é —Å–µ–±—è. 
        –ù–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π, –≤–∞–∂–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã —É–∂–µ –∂–¥—É—Ç —Ç–µ–±—è.
      buttons:
        - text: "–í—Å–µ –ø—Ä–æ –º–µ–Ω—è"
          callback_data: "rating_perfect"
        - text: "–ù–æ—Ä–º"
          callback_data: "rating_good"
        - text: "–ì–æ—Ç–æ–≤ –ø–æ—Å–ø–æ—Ä–∏—Ç—å"
          callback_data: "rating_disagree"
        - text: "–ù–µ —Å–æ–≤—Å–µ–º —Å–æ–≥–ª–∞—Å–µ–Ω"
          callback_data: "rating_partly_disagree"
        - text: "–Ø –µ—â–µ –Ω–µ –ø–æ—Å–º–æ—Ç—Ä–µ–ª –¥–æ—Å—å–µ"
          callback_data: "rating_not_viewed"
    next_step: wait_for_feedback

  - id: send_dossier_push_2
    type: channel_action
    params:
      action: send_buttons
      chat_id: "{chat_id}"
      text: |
        –í—Ä–µ–º—è –∑–∞–≥–ª—è–Ω—É—Ç—å –≤ —Å–µ–±—è. –¢–≤–æ–µ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ –¥–æ—Å—å–µ –æ—Ç –ë–æ—Ç–∞ Onto nothing –≤—Å–µ –µ—â–µ –∂–¥–µ—Ç —Ç–≤–æ–µ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è. 
        –£–∑–Ω–∞–π, –∫–∞–∫–∏–µ —Å–∫—Ä—ã—Ç—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤–ª–∏—è—é—Ç –Ω–∞ —Ç–≤–æ—é –∂–∏–∑–Ω—å. –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∞–∂–Ω–æ.
      buttons:
        - text: "–í—Å–µ –ø—Ä–æ –º–µ–Ω—è"
          callback_data: "rating_perfect"
        - text: "–ù–æ—Ä–º"
          callback_data: "rating_good"
        - text: "–ì–æ—Ç–æ–≤ –ø–æ—Å–ø–æ—Ä–∏—Ç—å"
          callback_data: "rating_disagree"
        - text: "–ù–µ —Å–æ–≤—Å–µ–º —Å–æ–≥–ª–∞—Å–µ–Ω"
          callback_data: "rating_partly_disagree"
        - text: "–Ø –µ—â–µ –Ω–µ –ø–æ—Å–º–æ—Ç—Ä–µ–ª –¥–æ—Å—å–µ"
          callback_data: "rating_not_viewed"
    next_step: wait_for_feedback

  - id: send_dossier_push_3
    type: channel_action
    params:
      action: send_buttons
      chat_id: "{chat_id}"
      text: |
        –ö–ª—é—á –∫ —Ç–≤–æ–∏–º –ø–µ—Ä–µ–º–µ–Ω–∞–º –≤ –¥–æ—Å—å–µ. –ü—Ä–æ–ø—É—Å—Ç–∏–ª –Ω–∞—à–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ? –ë–æ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –¥–ª—è —Ç–µ–±—è –¥–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –º—ã—Å–ª–µ–≤–∏—Ä—É—Å–æ–≤. 
        –ü–æ–Ω–∏–º–∞–Ω–∏–µ ‚Äì –ø–µ—Ä–≤—ã–π —à–∞–≥ –∫ –≤—ã—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—é. –ü–æ—Å–º–æ—Ç—Ä–∏ —Å–µ–π—á–∞—Å.
      buttons:
        - text: "–í—Å–µ –ø—Ä–æ –º–µ–Ω—è"
          callback_data: "rating_perfect"
        - text: "–ù–æ—Ä–º"
          callback_data: "rating_good"
        - text: "–ì–æ—Ç–æ–≤ –ø–æ—Å–ø–æ—Ä–∏—Ç—å"
          callback_data: "rating_disagree"
        - text: "–ù–µ —Å–æ–≤—Å–µ–º —Å–æ–≥–ª–∞—Å–µ–Ω"
          callback_data: "rating_partly_disagree"
        - text: "–Ø –µ—â–µ –Ω–µ –ø–æ—Å–º–æ—Ç—Ä–µ–ª –¥–æ—Å—å–µ"
          callback_data: "rating_not_viewed"
    next_step: wait_for_feedback

  - id: send_dossier_push_4
    type: channel_action
    params:
      action: send_buttons
      chat_id: "{chat_id}"
      text: |
        –≠—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–Ω—Å –Ω–∞ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è. –ù–µ —É–ø—É—Å—Ç–∏ –≤–∞–∂–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã –æ —Å–µ–±–µ. 
        –¢–≤–æ–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–µ –¥–æ—Å—å–µ ‚Äì —ç—Ç–æ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ç –∑–Ω–∞–Ω–∏–π –æ —Ç–≤–æ–∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –±–∞—Ä—å–µ—Ä–∞—Ö. 
        –ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –Ω–∞ –µ–≥–æ –∏–∑—É—á–µ–Ω–∏–µ. –≠—Ç–æ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ø–æ–≤–æ—Ä–æ—Ç–Ω—ã–º –º–æ–º–µ–Ω—Ç–æ–º. –§–∞–π–ª –≤—Å–µ –µ—â–µ –∞–∫—Ç–∏–≤–µ–Ω.
      buttons:
        - text: "–í—Å–µ –ø—Ä–æ –º–µ–Ω—è"
          callback_data: "rating_perfect"
        - text: "–ù–æ—Ä–º"
          callback_data: "rating_good"
        - text: "–ì–æ—Ç–æ–≤ –ø–æ—Å–ø–æ—Ä–∏—Ç—å"
          callback_data: "rating_disagree"
        - text: "–ù–µ —Å–æ–≤—Å–µ–º —Å–æ–≥–ª–∞—Å–µ–Ω"
          callback_data: "rating_partly_disagree"
        - text: "–Ø –µ—â–µ –Ω–µ –ø–æ—Å–º–æ—Ç—Ä–µ–ª –¥–æ—Å—å–µ"
          callback_data: "rating_not_viewed"
    next_step: wait_for_feedback

  - id: end
    type: end 