{
  "id": "test_mongo_plugin",
  "name": "–¢–µ—Å—Ç MongoStoragePlugin",
  "description": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π MongoDB –ø–ª–∞–≥–∏–Ω–∞",
  "steps": [
    {
      "id": "start",
      "type": "start",
      "next": "insert_test_data"
    },
    {
      "id": "insert_test_data",
      "type": "mongo_insert_one",
      "params": {
        "collection": "test_plugin_data",
        "document": {
          "test_id": "mongo_plugin_test_{{ user_id }}",
          "plugin_name": "MongoStoragePlugin",
          "test_timestamp": "{{ current_timestamp }}",
          "status": "testing",
          "data": {
            "user_id": "{{ user_id }}",
            "chat_id": "{{ chat_id }}",
            "test_value": 42
          }
        },
        "output_var": "insert_result"
      },
      "next": "log_insert_result"
    },
    {
      "id": "log_insert_result",
      "type": "log",
      "params": {
        "message": "‚úÖ MongoDB INSERT —É—Å–ø–µ—à–µ–Ω! ID: {{ insert_result.inserted_id }}"
      },
      "next": "find_test_data"
    },
    {
      "id": "find_test_data",
      "type": "mongo_find_one",
      "params": {
        "collection": "test_plugin_data",
        "filter": {
          "test_id": "mongo_plugin_test_{{ user_id }}"
        },
        "output_var": "found_document"
      },
      "next": "log_find_result"
    },
    {
      "id": "log_find_result",
      "type": "log",
      "params": {
        "message": "‚úÖ MongoDB FIND —É—Å–ø–µ—à–µ–Ω! –ù–∞–π–¥–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç: {{ found_document.plugin_name }} —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º {{ found_document.status }}"
      },
      "next": "update_test_data"
    },
    {
      "id": "update_test_data",
      "type": "mongo_update_one",
      "params": {
        "collection": "test_plugin_data",
        "filter": {
          "test_id": "mongo_plugin_test_{{ user_id }}"
        },
        "update": {
          "$set": {
            "status": "completed",
            "updated_timestamp": "{{ current_timestamp }}",
            "test_result": "SUCCESS"
          }
        },
        "output_var": "update_result"
      },
      "next": "log_update_result"
    },
    {
      "id": "log_update_result",
      "type": "log",
      "params": {
        "message": "‚úÖ MongoDB UPDATE —É—Å–ø–µ—à–µ–Ω! –û–±–Ω–æ–≤–ª–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: {{ update_result.modified_count }}"
      },
      "next": "final_verification"
    },
    {
      "id": "final_verification",
      "type": "mongo_find_one",
      "params": {
        "collection": "test_plugin_data",
        "filter": {
          "test_id": "mongo_plugin_test_{{ user_id }}"
        },
        "output_var": "final_document"
      },
      "next": "log_final_result"
    },
    {
      "id": "log_final_result",
      "type": "log",
      "params": {
        "message": "üéâ MongoStoragePlugin –¢–ï–°–¢ –ó–ê–í–ï–†–®–ï–ù! –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å: {{ final_document.status }}, —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {{ final_document.test_result }}"
      },
      "next": "end"
    },
    {
      "id": "end",
      "type": "end"
    }
  ]
} 