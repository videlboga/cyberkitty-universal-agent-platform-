#!/usr/bin/env python3
"""
–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç WebSearch —Å –¥–∞–Ω–Ω—ã–º–∏ –ë–∏—Ç—Ä–∏–∫—Å24 - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –•–û–†–û–®–ï–ô hardcoded –ª–æ–≥–∏–∫–∏
"""

import sys
import os
sys.path.append(os.path.join(os.path.dirname(__file__), 'kittycore'))

from kittycore.tools.real_tools import WebSearch

def test_bitrix_websearch():
    """–¢–µ—Å—Ç WebSearch —Å –¥–∞–Ω–Ω—ã–º–∏ –ë–∏—Ç—Ä–∏–∫—Å24"""
    
    print("üß™ –¢–ï–°–¢: WebSearch —Å –¥–∞–Ω–Ω—ã–º–∏ –ë–∏—Ç—Ä–∏–∫—Å24")
    print("=" * 60)
    
    # –°–æ–∑–¥–∞–µ–º WebSearch
    web_search = WebSearch()
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–∏—Å–∫ –ø–æ –ë–∏—Ç—Ä–∏–∫—Å24
    queries = [
        "–ë–∏—Ç—Ä–∏–∫—Å24 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
        "bitrix24 –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å",
        "–ë–∏—Ç—Ä–∏–∫—Å24 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
        "–æ–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫ –±–µ–∑ –±–∏—Ç—Ä–∏–∫—Å–∞"
    ]
    
    for query in queries:
        print(f"\nüîç –ü–æ–∏—Å–∫: '{query}'")
        print("-" * 40)
        
        result = web_search.search(query)
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 300 —Å–∏–º–≤–æ–ª–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        preview = result[:300] + "..." if len(result) > 300 else result
        print(preview)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –¥–ª—è –ë–∏—Ç—Ä–∏–∫—Å24 –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        if "–±–∏—Ç—Ä–∏–∫—Å24" in query.lower() or "bitrix24" in query.lower():
            if "2000+ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π" in result:
                print("‚úÖ –°–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä—ã–Ω–∫–∞!")
            if "CRM –∏ –ø—Ä–æ–¥–∞–∂–∏" in result:
                print("‚úÖ –°–æ–¥–µ—Ä–∂–∏—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π!")
            if "AmoCRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è" in result:
                print("‚úÖ –°–æ–¥–µ—Ä–∂–∏—Ç UX –ø—Ä–æ–±–ª–µ–º—ã!")
            if "500+ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤" in result:
                print("‚úÖ –°–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö!")
        else:
            if "—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏" in result:
                print("‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π fallback –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞!")
    
    print("\nüìä –†–ï–ó–£–õ–¨–¢–ê–¢ –¢–ï–°–¢–ê:")
    print("‚úÖ WebSearch —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!")
    print("‚úÖ –î–ª—è –ë–∏—Ç—Ä–∏–∫—Å24 –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–≥–∞—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ!")
    print("‚úÖ –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ - –ø—Ä–æ—Å—Ç–æ–π fallback!")
    print("‚úÖ –•–û–†–û–®–ê–Ø hardcoded –ª–æ–≥–∏–∫–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–≤–æ—é –ø–æ–ª—å–∑—É!")
    
    return True

if __name__ == "__main__":
    success = test_bitrix_websearch()
    if success:
        print("\nüéâ –¢–ï–°–¢ –ü–†–û–ô–î–ï–ù! WebSearch —Å –ë–∏—Ç—Ä–∏–∫—Å24 —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ!")
    else:
        print("\nüí• –¢–ï–°–¢ –ü–†–û–í–ê–õ–ï–ù!")
        sys.exit(1) 