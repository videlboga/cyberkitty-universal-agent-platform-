{
  "atomic_template": "amocrm_fields_demo",
  "version": "1.0",
  "description": "–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ä—Ç–æ–π –ø–æ–ª–µ–π AmoCRM - –ø–æ–ª—É—á–µ–Ω–∏–µ, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ",
  "author": "KittyCore Universal Agent Platform",
  
  "parameters": {
    "entity_type": {
      "type": "string",
      "description": "–¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞—Ä—Ç—ã –ø–æ–ª–µ–π",
      "default": "contacts",
      "example": "contacts"
    },
    "contact_name": {
      "type": "string", 
      "description": "–ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è",
      "required": true,
      "example": "–¢–µ—Å—Ç–æ–≤—ã–π –ö–æ–Ω—Ç–∞–∫—Ç"
    },
    "contact_phone": {
      "type": "string",
      "description": "–¢–µ–ª–µ—Ñ–æ–Ω –∫–æ–Ω—Ç–∞–∫—Ç–∞",
      "example": "+79001234567"
    },
    "contact_email": {
      "type": "string",
      "description": "Email –∫–æ–Ω—Ç–∞–∫—Ç–∞",
      "example": "test@example.com"
    },
    "custom_fields": {
      "type": "object",
      "description": "–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–∞",
      "example": {
        "POSITION": "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫",
        "TG_USERNAME": "@testuser",
        "–°–ï–ú–ï–ô–ù–û–ï_–ü–û–õ–û–ñ–ï–ù–ò–ï": "–ñ–µ–Ω–∞—Ç"
      }
    }
  },
  
  "scenario_id": "atomic_amocrm_fields_demo",
  "steps": [
    {
      "id": "start",
      "type": "start",
      "next_step": "get_current_fields"
    },
    {
      "id": "get_current_fields",
      "type": "amocrm_get_fields",
      "params": {
        "entity_type": "contacts",
        "output_var": "current_fields"
      },
      "next_step": "log_fields_info"
    },
    {
      "id": "log_fields_info",
      "type": "log_message",
      "params": {
        "message": "üìã –ö–∞—Ä—Ç–∞ –ø–æ–ª–µ–π –≤ –ë–î: {current_fields.fields_count} –ø–æ–ª–µ–π",
        "level": "info"
      },
      "next_step": "create_contact"
    },
    {
      "id": "create_contact",
      "type": "amocrm_create_contact",
      "params": {
        "name": "{contact_name}",
        "phone": "{contact_phone}",
        "email": "{contact_email}",
        "custom_fields": "{custom_fields}",
        "output_var": "created_contact"
      },
      "next_step": "log_result"
    },
    {
      "id": "log_result",
      "type": "log_message",
      "params": {
        "message": "‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–æ–Ω—Ç–∞–∫—Ç {created_contact.contact_id}, –∫–∞—Ä—Ç–∞ –ø–æ–ª–µ–π: {created_contact.used_fields_map}, –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π: {created_contact.custom_fields_count}",
        "level": "info"
      },
      "next_step": "end"
    },
    {
      "id": "end",
      "type": "end"
    }
  ],
  
  "examples": [
    {
      "name": "–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–æ–ª—è–º–∏",
      "context": {
        "contact_name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
        "contact_phone": "+79001234567",
        "contact_email": "ivan@example.com",
        "custom_fields": {
          "POSITION": "–ú–µ–Ω–µ–¥–∂–µ—Ä",
          "TG_USERNAME": "@ivan_petrov",
          "–°–ï–ú–ï–ô–ù–û–ï_–ü–û–õ–û–ñ–ï–ù–ò–ï": "–ñ–µ–Ω–∞—Ç",
          "–í–û–ó–†–ê–°–¢": "35"
        }
      }
    },
    {
      "name": "–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å —Å–µ–ª–µ–∫—Ç–æ–º",
      "context": {
        "contact_name": "–ê–Ω–Ω–∞ –°–∏–¥–æ—Ä–æ–≤–∞",
        "contact_phone": "+79009876543",
        "custom_fields": {
          "POSITION": "–î–∏–∑–∞–π–Ω–µ—Ä",
          "–°–ï–ú–ï–ô–ù–û–ï_–ü–û–õ–û–ñ–ï–ù–ò–ï": "–ù–µ –∑–∞–º—É–∂–µ–º"
        }
      }
    }
  ],
  
  "requirements": {
    "plugins": ["SimpleAmoCRMPlugin", "MongoPlugin"],
    "context_variables": ["contact_name"],
    "settings": ["simple_amocrm", "amocrm_fields_contacts"]
  },
  
  "output": {
    "context_updates": {
      "current_fields": "–¢–µ–∫—É—â–∞—è –∫–∞—Ä—Ç–∞ –ø–æ–ª–µ–π –∏–∑ –ë–î",
      "created_contact": "–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–æ–ª—è–º–∏"
    },
    "description": "–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –ø–æ–ª–µ–π AmoCRM –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞"
  },
  
  "field_mapping_info": {
    "description": "–ö–∞—Ä—Ç–∞ –ø–æ–ª–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π",
    "supported_field_types": [
      "text - —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è",
      "numeric - —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è", 
      "select - –æ–¥–∏–Ω–æ—á–Ω—ã–π –≤—ã–±–æ—Ä (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è enum_id)",
      "multiselect - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä",
      "multitext - –ø–æ–ª—è —Å —Ç–∏–ø–∞–º–∏ (—Ç–µ–ª–µ—Ñ–æ–Ω, email)"
    ],
    "enum_mapping": "–î–ª—è —Å–µ–ª–µ–∫—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è enum_id –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é –∏–ª–∏ –∫–æ–¥—É",
    "fallback": "–ï—Å–ª–∏ –ø–æ–ª–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–∞—Ä—Ç–µ, –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥–∏"
  }
} 