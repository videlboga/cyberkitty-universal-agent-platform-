# ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ - –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê

## üéØ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

**–î–∞, –º—ã –º–æ–∂–µ–º –∏ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤!**

### üîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **`app/core/scenario_logger.py`** - –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ö–ª–∞—Å—Å `ScenarioLogger` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   - –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö `ScenarioLog` –∏ `StepLog`
   - 4 —É—Ä–æ–≤–Ω—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏: MINIMAL, BASIC, DETAILED, FULL

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `SimpleScenarioEngine`**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

3. **API endpoints –≤ `app/api/simple.py`**
   - `GET /api/v1/simple/scenario-logs/active` - –∞–∫—Ç–∏–≤–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - `GET /api/v1/simple/scenario-logs/{execution_id}` - –¥–µ—Ç–∞–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - `GET /api/v1/simple/scenario-logs/history` - –∏—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π

4. **–§–∞–π–ª—ã –ª–æ–≥–æ–≤**
   - `logs/scenario_execution.log` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∏ —Å–∂–∞—Ç–∏–µ
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MongoDB –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

## üìä –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

### –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è:
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- ‚úÖ –û–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –°—Ç–∞—Ç—É—Å (completed, error, stopped, switched)
- ‚úÖ –ù–∞—á–∞–ª—å–Ω—ã–π –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞:
- ‚úÖ ID –∏ —Ç–∏–ø —à–∞–≥–∞
- ‚úÖ –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- ‚úÖ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
- ‚úÖ –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —à–∞–≥–∞ (–≤ —Ä–µ–∂–∏–º–µ DETAILED/FULL)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–≤ —Ä–µ–∂–∏–º–µ DETAILED/FULL)
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç `test_scenario_logging.py`:

```bash
python test_scenario_logging.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞:**
```
‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω –∑–∞ 7.8ms
üìà –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤: 0
üéâ –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!
```

## üìÅ –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥ –≤ —Ñ–∞–π–ª–µ:
```
2025-05-31 10:06:17.333 | INFO | SCENARIO | üé¨ –ù–ê–ß–ê–õ–û –°–¶–ï–ù–ê–†–ò–Ø test_logging_scenario
2025-05-31 10:06:17.334 | INFO | SCENARIO | ‚ñ∂Ô∏è –®–ê–ì start (start)
2025-05-31 10:06:17.335 | INFO | SCENARIO | ‚úÖ –®–ê–ì start –∑–∞–≤–µ—Ä—à–µ–Ω (0.8ms)
2025-05-31 10:06:17.340 | INFO | SCENARIO | üéâ –°–¶–ï–ù–ê–†–ò–ô test_logging_scenario –∑–∞–≤–µ—Ä—à–µ–Ω
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
```json
{
  "total_duration_ms": 7.8,
  "steps_count": 5,
  "success_rate": 100.0,
  "avg_step_duration_ms": 0.78,
  "slowest_step": {"id": "log_hello", "duration_ms": 0.9},
  "fastest_step": {"id": "increment_counter", "duration_ms": 0.7}
}
```

## üåê API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ê–∫—Ç–∏–≤–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
```bash
curl http://localhost:8085/api/v1/simple/scenario-logs/active
```

### –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π:
```bash
curl "http://localhost:8085/api/v1/simple/scenario-logs/history?limit=10&scenario_id=registration"
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
```python
from app.core.scenario_logger import LogLevel

# MINIMAL - —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü —Å—Ü–µ–Ω–∞—Ä–∏—è
# BASIC - + –∫–∞–∂–¥—ã–π —à–∞–≥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)  
# DETAILED - + –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
# FULL - + –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
DEBUG=true  # –í–∫–ª—é—á–∞–µ—Ç DETAILED —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã** - ~1-5ms –Ω–∞ —à–∞–≥
3. **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - 4 —É—Ä–æ–≤–Ω—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
4. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** - —Ñ–∞–π–ª—ã + MongoDB
5. **API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** - —É–¥–æ–±–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —á–µ—Ä–µ–∑ HTTP
6. **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –∞–Ω–∞–ª–∏–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç
7. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
- ‚úÖ API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω–µ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/scenario_logging_guide.md` 