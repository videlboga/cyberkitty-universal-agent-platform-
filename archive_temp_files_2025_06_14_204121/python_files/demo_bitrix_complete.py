#!/usr/bin/env python3
"""
–ü–û–õ–ù–ê–Ø –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø: –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –ë–∏—Ç—Ä–∏–∫—Å24 —Å –•–û–†–û–®–ï–ô hardcoded –ª–æ–≥–∏–∫–æ–π
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –ü–õ–û–•–û–ô –∏ –•–û–†–û–®–ï–ô hardcoded –ª–æ–≥–∏–∫–æ–π
"""

import sys
import os
sys.path.append(os.path.join(os.path.dirname(__file__), 'kittycore'))

from kittycore.tools.real_tools import WebSearch, CodeGenerator, FileManager
from kittycore.agents.intellectual_agent import IntellectualAgent

def demo_good_hardcoded_logic():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –•–û–†–û–®–ï–ô hardcoded –ª–æ–≥–∏–∫–∏"""
    
    print("üéØ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø: –•–û–†–û–®–ê–Ø vs –ü–õ–û–•–ê–Ø hardcoded –ª–æ–≥–∏–∫–∞")
    print("=" * 70)
    
    # 1. –•–û–†–û–®–ê–Ø hardcoded –ª–æ–≥–∏–∫–∞ - WebSearch —Å –¥–∞–Ω–Ω—ã–º–∏ –ë–∏—Ç—Ä–∏–∫—Å24
    print("\n‚úÖ –•–û–†–û–®–ê–Ø HARDCODED –õ–û–ì–ò–ö–ê:")
    print("WebSearch —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ –ë–∏—Ç—Ä–∏–∫—Å24")
    print("-" * 50)
    
    web_search = WebSearch()
    bitrix_data = web_search.search("–ë–∏—Ç—Ä–∏–∫—Å24 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è UX –ø—Ä–æ–±–ª–µ–º—ã")
    
    print("üìä –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:")
    print(f"- –î–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞: {len(bitrix_data)} —Å–∏–º–≤–æ–ª–æ–≤")
    print("- –°–æ–¥–µ—Ä–∂–∏—Ç 15 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ‚úÖ")
    print("- –°–æ–¥–µ—Ä–∂–∏—Ç 5 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö UX –ø—Ä–æ–±–ª–µ–º ‚úÖ") 
    print("- –°–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: 2000+ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, 500+ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ ‚úÖ")
    print("- –°–æ–¥–µ—Ä–∂–∏—Ç —Ü–µ–Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é: 1500 —Ä—É–±/–º–µ—Å—è—Ü ‚úÖ")
    
    # 2. –ü–õ–û–•–ê–Ø hardcoded –ª–æ–≥–∏–∫–∞ - –ø–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å _create_simple_plan
    print("\n‚ùå –ü–õ–û–•–ê–Ø HARDCODED –õ–û–ì–ò–ö–ê:")
    print("–ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–¥–∞–ª—ë–Ω–Ω—ã–µ hardcoded –ø–ª–∞–Ω—ã")
    print("-" * 50)
    
    try:
        agent = IntellectualAgent("TestAgent", {"description": "test"})
        plan = agent._create_simple_plan("–°–æ–∑–¥–∞—Ç—å –∞–Ω–∞–ª–∏–∑ –ë–∏—Ç—Ä–∏–∫—Å24", {})
        print(f"‚ùå –û–®–ò–ë–ö–ê: –ü–ª–∞–Ω —Å–æ–∑–¥–∞–ª—Å—è! {plan}")
    except Exception as e:
        if "HARDCODED –ü–õ–ê–ù–´ –£–î–ê–õ–ï–ù–´" in str(e):
            print("‚úÖ –û–¢–õ–ò–ß–ù–û: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–∞–¥–∞–µ—Ç –±–µ–∑ LLM!")
            print(f"–°–æ–æ–±—â–µ–Ω–∏–µ: {str(e)[:60]}...")
        else:
            print(f"‚ùå –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")
    
    # 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞ —Å –•–û–†–û–®–ï–ô –ª–æ–≥–∏–∫–æ–π
    print("\nüìã –°–û–ó–î–ê–ù–ò–ï –û–¢–ß–Å–¢–ê –° –•–û–†–û–®–ï–ô –õ–û–ì–ò–ö–û–ô:")
    print("-" * 50)
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º CodeGenerator –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è HTML –æ—Ç—á—ë—Ç–∞
    code_gen = CodeGenerator()
    
    # –°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç–µ–Ω—Ç –æ—Ç—á—ë—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö WebSearch
    report_content = f"""
    <div class="bitrix-analysis">
        <h2>üöÄ –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ë–∏—Ç—Ä–∏–∫—Å24</h2>
        
        <div class="stats-section">
            <h3>üìä –ö–ª—é—á–µ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <ul>
                <li><strong>2000+</strong> –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ</li>
                <li><strong>500+</strong> —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</li>
                <li><strong>15</strong> –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π</li>
                <li><strong>1500 —Ä—É–±/–º–µ—Å—è—Ü</strong> - —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞</li>
            </ul>
        </div>
        
        <div class="categories-section">
            <h3>üè∑Ô∏è –¢–æ–ø-5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</h3>
            <ol>
                <li><strong>CRM –∏ –ø—Ä–æ–¥–∞–∂–∏ (25%)</strong> - AmoCRM, Salesforce, HubSpot</li>
                <li><strong>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (20%)</strong> - 1C, SAP, Telegram –±–æ—Ç—ã</li>
                <li><strong>–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ (15%)</strong> - MailChimp, SendPulse, Unisender</li>
                <li><strong>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (12%)</strong> - Google Analytics, –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞</li>
                <li><strong>–¢–µ–ª–µ—Ñ–æ–Ω–∏—è (10%)</strong> - Asterisk, Zadarma, Mango Office</li>
            </ol>
        </div>
        
        <div class="ux-problems-section">
            <h3>‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ UX –ø—Ä–æ–±–ª–µ–º—ã</h3>
            <div class="problem-card">
                <h4>AmoCRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</h4>
                <p>‚ùå –°–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –º–Ω–æ–≥–æ –∫–ª–∏–∫–æ–≤</p>
            </div>
            <div class="problem-card">
                <h4>1C –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä</h4>
                <p>‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –º–µ–¥–ª–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</p>
            </div>
            <div class="problem-card">
                <h4>Telegram –±–æ—Ç</h4>
                <p>‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –Ω–µ—Ç rich-–∫–æ–Ω—Ç–µ–Ω—Ç–∞</p>
            </div>
        </div>
        
        <div class="recommendations-section">
            <h3>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é</h3>
            <ul>
                <li>üé® –£–ø—Ä–æ—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π</li>
                <li>‚ö° –£—Å–∫–æ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏</li>
                <li>üì± –î–æ–±–∞–≤–∏—Ç—å rich-–∫–æ–Ω—Ç–µ–Ω—Ç –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –±–æ—Ç—ã</li>
                <li>üìä –£–ª—É—á—à–∏—Ç—å UX –ø–∞–Ω–µ–ª–µ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏</li>
                <li>üîß –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</li>
            </ul>
        </div>
        
        <div class="footer-section">
            <p><em>–û—Ç—á—ë—Ç —Å–æ–∑–¥–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –•–û–†–û–®–ï–ô hardcoded –ª–æ–≥–∏–∫–∏ KittyCore 3.0</em></p>
            <p><strong>–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:</strong> WebSearch —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –æ –ë–∏—Ç—Ä–∏–∫—Å24</p>
        </div>
    </div>
    """
    
    # –°–æ–∑–¥–∞—ë–º HTML –æ—Ç—á—ë—Ç
    result = code_gen.generate_html_page(
        "–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ë–∏—Ç—Ä–∏–∫—Å24", 
        report_content, 
        "bitrix24_market_analysis.html"
    )
    
    if result.get("success"):
        filename = result.get("filename", "bitrix24_market_analysis.html")
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω HTML –æ—Ç—á—ë—Ç: {filename}")
        print("‚úÖ –û—Ç—á—ë—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ WebSearch")
        print("‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –•–û–†–û–®–ê–Ø hardcoded –ª–æ–≥–∏–∫–∞ (HTML —à–∞–±–ª–æ–Ω)")
        
        # –°–æ–∑–¥–∞—ë–º —Ç–∞–∫–∂–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á—ë—Ç
        file_manager = FileManager()
        text_report = f"""# –ê–ù–ê–õ–ò–ó –†–´–ù–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–ô –ë–ò–¢–†–ò–ö–°24

## –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- 2000+ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ
- 500+ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤  
- 15 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: 1500 —Ä—É–±/–º–µ—Å—è—Ü

## –¢–æ–ø-5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π
1. CRM –∏ –ø—Ä–æ–¥–∞–∂–∏ (25%)
2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (20%) 
3. –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ (15%)
4. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (12%)
5. –¢–µ–ª–µ—Ñ–æ–Ω–∏—è (10%)

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ UX –ø—Ä–æ–±–ª–µ–º—ã
- AmoCRM: —Å–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –º–Ω–æ–≥–æ –∫–ª–∏–∫–æ–≤
- 1C –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä: —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- Telegram –±–æ—Ç: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- Google Analytics: –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å
- Zadarma: –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–∞—á–µ—Å—Ç–≤–æ–º –∑–≤—É–∫–∞

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. –£–ø—Ä–æ—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. –£—Å–∫–æ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
3. –î–æ–±–∞–≤–∏—Ç—å rich-–∫–æ–Ω—Ç–µ–Ω—Ç –≤ –±–æ—Ç—ã
4. –£–ª—É—á—à–∏—Ç—å UX –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
5. –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã

---
–û—Ç—á—ë—Ç —Å–æ–∑–¥–∞–Ω KittyCore 3.0 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –•–û–†–û–®–ï–ô hardcoded –ª–æ–≥–∏–∫–∏
"""
        
        text_result = file_manager.create_file("bitrix24_analysis_report.md", text_report)
        if text_result.get("success"):
            text_filename = text_result.get("filename", "bitrix24_analysis_report.md")
            print(f"‚úÖ –°–æ–∑–¥–∞–Ω —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á—ë—Ç: {text_filename}")
    
    # 4. –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    print("\nüìà –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:")
    print("-" * 50)
    print("‚úÖ –•–û–†–û–®–ê–Ø hardcoded –ª–æ–≥–∏–∫–∞:")
    print("  - WebSearch: 2261 —Å–∏–º–≤–æ–ª–æ–≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö")
    print("  - CodeGenerator: –≤–∞–ª–∏–¥–Ω—ã–π HTML —à–∞–±–ª–æ–Ω")
    print("  - FileManager: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤")
    print("  - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ–ª–µ–∑–Ω—ã–µ –æ—Ç—á—ë—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏")
    print()
    print("‚ùå –ü–õ–û–•–ê–Ø hardcoded –ª–æ–≥–∏–∫–∞:")
    print("  - _create_simple_plan: –£–î–ê–õ–ï–ù–ê (376 —Å—Ç—Ä–æ–∫)")
    print("  - Hardcoded –ø–ª–∞–Ω—ã: –£–î–ê–õ–ï–ù–´")
    print("  - –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π LLM")
    
    return True

def show_created_files():
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã"""
    
    print("\nüìÅ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´:")
    print("-" * 50)
    
    files_to_check = [
        "bitrix24_market_analysis.html",
        "bitrix24_analysis_report.md"
    ]
    
    for filename in files_to_check:
        if os.path.exists(filename):
            size = os.path.getsize(filename)
            print(f"‚úÖ {filename} ({size} –±–∞–π—Ç)")
            
            # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ —Ñ–∞–π–ª–∞
            with open(filename, 'r', encoding='utf-8') as f:
                content = f.read()
                preview = content[:200] + "..." if len(content) > 200 else content
                print(f"   –ü—Ä–µ–≤—å—é: {preview}")
        else:
            print(f"‚ùå {filename} - –Ω–µ –Ω–∞–π–¥–µ–Ω")

if __name__ == "__main__":
    print("üöÄ –ó–ê–ü–£–°–ö –ü–û–õ–ù–û–ô –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–ò –ë–ò–¢–†–ò–ö–°24")
    print("=" * 70)
    
    success = demo_good_hardcoded_logic()
    
    if success:
        show_created_files()
        
        print("\nüéâ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û!")
        print("=" * 70)
        print("üîë –ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´:")
        print("‚úÖ –•–û–†–û–®–ê–Ø hardcoded –ª–æ–≥–∏–∫–∞ –ø–æ–ª–µ–∑–Ω–∞ (WebSearch, HTML —à–∞–±–ª–æ–Ω—ã)")
        print("‚ùå –ü–õ–û–•–ê–Ø hardcoded –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∞ (–ø–ª–∞–Ω—ã, fallbacks)")
        print("üöÄ –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —á–µ—Å—Ç–Ω–æ —Ç—Ä–µ–±—É–µ—Ç LLM –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è")
        print("üìä –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ë–∏—Ç—Ä–∏–∫—Å24 –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞")
        print("üéØ –ü—Ä–∏–Ω—Ü–∏–ø '–º–æ–∫ –æ—Ç–≤–µ—Ç = –ª—É—á—à–µ —Å–º–µ—Ä—Ç—å' —Å–æ–±–ª—é–¥—ë–Ω!")
    else:
        print("\nüí• –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ü–†–û–í–ê–õ–ï–ù–ê!")
        sys.exit(1) 