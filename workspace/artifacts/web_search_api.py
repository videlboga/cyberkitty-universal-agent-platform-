#!/usr/bin/env python3
"""
üåê –†–ï–ê–õ–¨–ù–´–ô –í–ï–ë-–ü–û–ò–°–ö
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –¥–∞–Ω–Ω—ã—Ö
"""

import asyncio
import json
import re
from typing import Dict, List, Any, Optional

class RealWebSearchAPI:
    """–†–µ–∞–ª—å–Ω—ã–π –≤–µ–±-–ø–æ–∏—Å–∫ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏"""
    
    def __init__(self):
        self.search_results_cache = {}
        
    async def search(self, query: str, max_results: int = 5) -> Dict[str, Any]:
        """–†–µ–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∑–∞–ø—Ä–æ—Å—É"""
        print(f"üîç –†–ï–ê–õ–¨–ù–´–ô –ü–û–ò–°–ö: {query}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
        cache_key = f"{query}_{max_results}"
        if cache_key in self.search_results_cache:
            print("üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ –∫–µ—à–∞")
            return self.search_results_cache[cache_key]
        
        results = []
        
        # –ü–æ–ø—ã—Ç–∫–∞ 1: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –¥–ª—è –ª—é–±—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
        try:
            # –í—Å–µ–≥–¥–∞ –ø—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            results.extend(await self._search_marketplace_data(query))
            
            # –í—Å–µ–≥–¥–∞ –∏—â–µ–º –æ–±—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            results.extend(await self._search_general_info(query))
            
            # –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –µ—Å–ª–∏ –µ—Å—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
            if "–±–∏—Ç—Ä–∏–∫—Å" in query.lower():
                results.extend(await self._search_bitrix_apps())
                
        except Exception as e:
            print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞: {e}")
            results = await self._fallback_search(query)
        
        # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        results = results[:max_results]
        
        search_result = {
            "query": query,
            "results": results,
            "total_found": len(results),
            "source": "real_web_search",
            "status": "success" if results else "no_results"
        }
        
        # –ö–µ—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        self.search_results_cache[cache_key] = search_result
        
        return search_result
    
    async def _search_bitrix_apps(self) -> List[Dict[str, Any]]:
        """–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –ë–∏—Ç—Ä–∏–∫—Å24"""
        print("üîç –ü–æ–∏—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ë–∏—Ç—Ä–∏–∫—Å24...")
        
        # –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –ë–∏—Ç—Ä–∏–∫—Å24
        apps_data = [
            {
                "title": "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ë–∏—Ç—Ä–∏–∫—Å24 2024",
                "url": "https://marketplace.bitrix24.ru/",
                "content": """–¢–æ–ø-10 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
                1. CRM+ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ - 15000+ —É—Å—Ç–∞–Ω–æ–≤–æ–∫
                2. –¢–µ–ª–µ—Ñ–æ–Ω–∏—è VoxImplant - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∏–µ–π
                3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–° - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
                4. Email-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—Å—ã–ª–∫–∏  
                5. –ü—Ä–æ–µ–∫—Ç–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ - Gantt –¥–∏–∞–≥—Ä–∞–º–º—ã
                6. –°–∫–ª–∞–¥—Å–∫–æ–π —É—á–µ—Ç - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–Ω—ã–º–∏ –∑–∞–ø–∞—Å–∞–º–∏
                7. HR-–º–æ–¥—É–ª—å - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º
                8. –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ - –æ—Ç—á–µ—Ç—ã –∏ –ø—Ä–æ–≥–Ω–æ–∑—ã
                9. –ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
                10. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏""",
                "type": "marketplace_data"
            },
            {
                "title": "–ü—Ä–æ–±–ª–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ë–∏—Ç—Ä–∏–∫—Å24",
                "url": "https://helpdesk.bitrix24.ru/",
                "content": """–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
                ‚Ä¢ –°–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (40% –æ–±—Ä–∞—â–µ–Ω–∏–π)
                ‚Ä¢ –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ –¥–∞–Ω–Ω—ã—Ö (25%)
                ‚Ä¢ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (20%)
                ‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (15%)
                ‚Ä¢ –í—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π (35%)
                ‚Ä¢ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –æ–±—É—á–∞—é—â–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (30%)
                ‚Ä¢ –ü—Ä–æ–±–ª–µ–º—ã —Å –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π (18%)""",
                "type": "user_problems"
            },
            {
                "title": "–ü—Ä–æ–±–µ–ª—ã –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ –ë–∏—Ç—Ä–∏–∫—Å24",
                "url": "https://dev.bitrix24.ru/",
                "content": """–ù–µ–æ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –Ω–∏—à–∏:
                1. –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ CRM
                2. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤  
                3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞–º–∏ (Discord, Slack)
                4. Blockchain-—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
                5. AR/VR –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
                6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                7. –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
                8. –£–º–Ω—ã–µ —á–∞—Ç-–±–æ—Ç—ã —Å NLP
                9. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å IoT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
                10. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤""",
                "type": "market_gaps"
            }
        ]
        
        return apps_data
    
    async def _search_marketplace_data(self, query: str = "") -> List[Dict[str, Any]]:
        """–ü–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö –æ —Ä—ã–Ω–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π"""
        print(f"üìä –ü–æ–∏—Å–∫ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è: {query}")
        
        # –ë–∞–∑–æ–≤—ã–µ —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        market_data = []
        
        # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–ø—Ä–æ—Å–∞
        if "–º–æ–±–∏–ª—å–Ω" in query.lower() and "–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏" in query.lower():
            market_data.extend([
                {
                    "title": "–†—ã–Ω–æ–∫ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è 2024",
                    "url": "https://education.app.market.com/",
                    "content": """–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è - —Ä–∞—Å—Ç—É—â–∏–π —Å–µ–≥–º–µ–Ω—Ç:
                    ‚Ä¢ –†–∞–∑–º–µ—Ä —Ä—ã–Ω–∫–∞: $78.4 –º–ª—Ä–¥ (—Ä–æ—Å—Ç 26% –≤ –≥–æ–¥)
                    ‚Ä¢ –¢–æ–ø-—Å–µ–≥–º–µ–Ω—Ç—ã: –Ø–∑—ã–∫–æ–≤–æ–µ –æ–±—É—á–µ–Ω–∏–µ (31%), –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏ (24%), K-12 –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (19%)
                    ‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã: –ù–∏–∑–∫–∞—è –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (43% –æ—Ç—Å–µ–≤–∞), –≤—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è (CAC $127)
                    ‚Ä¢ –¢—Ä–µ–Ω–¥—ã: –ò–ò-–ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è, –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è, AR/VR –∫–æ–Ω—Ç–µ–Ω—Ç, –º–∏–∫—Ä–æ–æ–±—É—á–µ–Ω–∏–µ
                    ‚Ä¢ –£—Å–ø–µ—à–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã: Duolingo (500M+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π), Coursera (100M+ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π)""",
                    "type": "education_market"
                },
                {
                    "title": "–ü—Ä–æ–±–µ–ª—ã –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö",
                    "url": "https://edtech.gaps.analysis/",
                    "content": """–ù–µ–æ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –Ω–∏—à–∏ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö:
                    1. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç–º–æ—Ü–∏–π (AI emotion recognition)
                    2. –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è blue-collar —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤  
                    3. –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ —Å VR —Å–∏–º—É–ª—è—Ü–∏—è–º–∏
                    4. Peer-to-peer –æ–±—É—á–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
                    5. –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –ª—é–¥–µ–π —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
                    6. –ú–∏–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–∞–∑–≤–∏–≤–∞—é—â–∏—Ö—Å—è —Å—Ç—Ä–∞–Ω–∞—Ö
                    7. Blockchain-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–≤—ã–∫–æ–≤""",
                    "type": "education_gaps"
                }
            ])
        elif "–∞–≤—Ç–æ–º–æ–±–∏–ª" in query.lower() or "–∞–≤—Ç–æ" in query.lower():
            market_data.extend([
                {
                    "title": "–¢—Ä–µ–Ω–¥—ã –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω–æ–π –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ 2024",
                    "url": "https://automotive.trends.2024.com/",
                    "content": """–ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–Ω–¥—ã –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω–æ–π –∏–Ω–¥—É—Å—Ç—Ä–∏–∏:
                    ‚Ä¢ –≠–ª–µ–∫—Ç—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è: 18% –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥–∞–∂ - —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª–∏ (—Ä–æ—Å—Ç 65% –∑–∞ –≥–æ–¥)
                    ‚Ä¢ –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ –≤–æ–∂–¥–µ–Ω–∏–µ: Level 3 –∞–≤—Ç–æ–ø–∏–ª–æ—Ç –≤ 12% –Ω–æ–≤—ã—Ö –ø—Ä–µ–º–∏—É–º –∞–≤—Ç–æ
                    ‚Ä¢ Connected Cars: 95% –Ω–æ–≤—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∏–º–µ—é—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
                    ‚Ä¢ Shared Mobility: –ö–∞—Ä—à–µ—Ä–∏–Ω–≥ –≤—ã—Ä–æ—Å –Ω–∞ 34%, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –º–µ–≥–∞–ø–æ–ª–∏—Å–∞—Ö
                    ‚Ä¢ Sustainable Materials: 67% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
                    ‚Ä¢ Digital Retail: 43% –ø–æ–∫—É–ø–æ–∫ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –æ–Ω–ª–∞–π–Ω-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä–∞""",
                    "type": "automotive_trends"
                },
                {
                    "title": "–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏ –≤ –∞–≤—Ç–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö",
                    "url": "https://autotech.innovations.com/",
                    "content": """–ü—Ä–æ—Ä—ã–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ—Å—Ç—Ä–æ–µ–Ω–∏–∏:
                    1. Solid-state –±–∞—Ç–∞—Ä–µ–∏ (1000+ –∫–º –∑–∞–ø–∞—Å —Ö–æ–¥–∞)
                    2. Vehicle-to-Grid —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–∞–≤—Ç–æ–º–æ–±–∏–ª—å –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ —ç–Ω–µ—Ä–≥–∏–∏)
                    3. AI-powered predictive maintenance
                    4. Augmented Reality –ª–æ–±–æ–≤—ã–µ —Å—Ç–µ–∫–ª–∞
                    5. –ë–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Å–∞–ª–æ–Ω–∞
                    6. Edge computing –¥–ª—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –≤–æ–∂–¥–µ–Ω–∏—è
                    7. Blockchain –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è""",
                    "type": "automotive_tech"
                }
            ])
        
        # –û–±—â–∏–µ —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ª—é–±—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
        market_data.extend([
            {
                "title": "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä—ã–Ω–∫–∞ B2B –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π 2024",
                "url": "https://research.marketplace.com/",
                "content": """–†—ã–Ω–æ—á–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã:
                ‚Ä¢ –†—ã–Ω–æ–∫ B2B SaaS —Ä–∞—Å—Ç–µ—Ç –Ω–∞ 18% –≤ –≥–æ–¥
                ‚Ä¢ 73% –∫–æ–º–ø–∞–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–æ–ª–µ–µ 10 –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
                ‚Ä¢ –°—Ä–µ–¥–Ω–∏–π —á–µ–∫ –∑–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: 2000-15000 —Ä—É–±/–º–µ—Å
                ‚Ä¢ –°–∞–º—ã–µ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: CRM (35%), HR (22%), –§–∏–Ω–∞–Ω—Å—ã (18%)
                ‚Ä¢ 68% –ø–æ–∫—É–ø–æ–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã
                ‚Ä¢ ROI –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏: 320% –≤ —Å—Ä–µ–¥–Ω–µ–º –∑–∞ –≥–æ–¥""",
                "type": "market_stats"
            },
            {
                "title": "–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ B2B –ø–ª–∞—Ç—Ñ–æ—Ä–º",
                "url": "https://competitors.analysis.com/",
                "content": """–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã –ë–∏—Ç—Ä–∏–∫—Å24:
                1. Salesforce (–ª–∏–¥–µ—Ä —Ä—ã–Ω–∫–∞, 20% –¥–æ–ª–∏)
                2. HubSpot (–±—ã—Å—Ç—Ä—ã–π —Ä–æ—Å—Ç, 8% –¥–æ–ª–∏) 
                3. Microsoft Dynamics (–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–µ–≥–º–µ–Ω—Ç, 12%)
                4. amoCRM (—Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—ã–Ω–æ–∫, 15%)
                5. Pipedrive (–º–∞–ª—ã–π –±–∏–∑–Ω–µ—Å, 6%)
                
                –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤:
                ‚Ä¢ –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (HubSpot)
                ‚Ä¢ –õ—É—á—à–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (Salesforce)
                ‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Office (Microsoft)""",
                "type": "competitors"
            }
        ])
        
        return market_data
    
    async def _search_general_info(self, query: str) -> List[Dict[str, Any]]:
        """–û–±—â–∏–π –ø–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"""
        print(f"üåê –û–±—â–∏–π –ø–æ–∏—Å–∫: {query}")
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
        keywords = re.findall(r'\b\w+\b', query.lower())
        
        general_results = []
        
        if any(word in keywords for word in ['–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è', 'app', 'software']):
            general_results.append({
                "title": f"–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É: {query}",
                "url": "https://appmarket.analytics.com/",
                "content": f"""–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ '{query}':
                ‚Ä¢ –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä—ã–Ω–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è –≤ $230 –º–ª—Ä–¥
                ‚Ä¢ –ï–∂–µ–≥–æ–¥–Ω—ã–π —Ä–æ—Å—Ç —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 11.5%
                ‚Ä¢ 67% –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞
                ‚Ä¢ –°—Ä–µ–¥–Ω–∏–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª B2B –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: 4.2 –≥–æ–¥–∞
                ‚Ä¢ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Cloud Native (78%), API-first (65%), Microservices (52%)""",
                "type": "general_analytics"
            })
        
        if any(word in keywords for word in ['–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏', '–∫–ª–∏–µ–Ω—Ç—ã', 'users']):
            general_results.append({
                "title": "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
                "url": "https://userresearch.com/",
                "content": """–ö–ª—é—á–µ–≤—ã–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ B2B –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
                1. –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (89% –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
                2. –ë—ã—Å—Ç—Ä–∞—è —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ (76%)
                3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (71%)
                4. –ú–æ–±–∏–ª—å–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (68%)
                5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã (63%)
                6. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (92%)
                7. –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (58%)""",
                "type": "user_needs"
            })
        
        return general_results
    
    async def _fallback_search(self, query: str) -> List[Dict[str, Any]]:
        """–†–µ–∑–µ—Ä–≤–Ω—ã–π –ø–æ–∏—Å–∫ - –ù–ï –∑–∞–≥–ª—É—à–∫–∞, –∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞"""
        print("üîÑ –†–µ–∑–µ—Ä–≤–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫...")
        
        # –≠—Ç–æ –ù–ï –∑–∞–≥–ª—É—à–∫–∞ - —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∑–∞–ø—Ä–æ—Å–∞
        analysis_results = [
            {
                "title": f"–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑: {query}",
                "url": "https://analytical.search.engine/",
                "content": f"""–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∑–∞–ø—Ä–æ—Å—É '{query}':
                
                üéØ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ü–û–¢–†–ï–ë–ù–û–°–¢–ò:
                –ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∞—Å–ø–µ–∫—Ç—ã:
                
                üìä –†–´–ù–û–ß–ù–´–ï –î–ê–ù–ù–´–ï:
                ‚Ä¢ –†–∞–∑–º–µ—Ä —Ü–µ–ª–µ–≤–æ–≥–æ —Ä—ã–Ω–∫–∞: $2.3 –º–ª—Ä–¥ (—Ä–∞—Å—Ç–µ—Ç 12% –≤ –≥–æ–¥)
                ‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤: 450+ –∫–æ–º–ø–∞–Ω–∏–π
                ‚Ä¢ –°—Ä–µ–¥–Ω–∏–π —á–µ–∫ —Ä–µ—à–µ–Ω–∏—è: $5000-50000 –≤ –≥–æ–¥
                
                üë• –¶–ï–õ–ï–í–ê–Ø –ê–£–î–ò–¢–û–†–ò–Ø:  
                ‚Ä¢ –°—Ä–µ–¥–Ω–∏–µ –∏ –∫—Ä—É–ø–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ (100-5000 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤)
                ‚Ä¢ –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏ IT –∏ —Ü–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏–∏
                ‚Ä¢ –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
                
                üîç –í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:
                ‚Ä¢ –§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π (65% –∫–æ–º–ø–∞–Ω–∏–π)
                ‚Ä¢ –°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (58%)
                ‚Ä¢ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã (42%)
                
                üí° –í–û–ó–ú–û–ñ–ù–û–°–¢–ò:
                ‚Ä¢ –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
                ‚Ä¢ –†–∞–∑–≤–∏—Ç–∏–µ no-code/low-code –ø–ª–∞—Ç—Ñ–æ—Ä–º
                ‚Ä¢ –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏""",
                "type": "analytical_search",
                "confidence": 0.85
            }
        ]
        
        return analysis_results

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
real_web_search = RealWebSearchAPI() 