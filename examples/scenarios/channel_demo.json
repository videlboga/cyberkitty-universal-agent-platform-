{
  "scenario_id": "modern_channel_demo",
  "name": "–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∫–∞–Ω–∞–ª–æ–≤",
  "description": "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∫–∞–Ω–∞–ª–æ–≤",
  "version": "3.0.0",
  "steps": [
    {
      "id": "start",
      "type": "start",
      "next_step": "welcome_message"
    },
    {
      "id": "welcome_message",
      "type": "channel_send_message",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "text": "üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∫–∞–Ω–∞–ª–æ–≤!\n\n–≠—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª—é–±—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∫–∞–Ω–∞–ª–æ–≤.",
        "parse_mode": "HTML",
        "output_var": "welcome_result"
      },
      "next_step": "show_menu"
    },
    {
      "id": "show_menu",
      "type": "channel_send_buttons",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "text": "üîß –í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:",
        "buttons": [
          [
            {"text": "üìù –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ", "callback_data": "test_message"},
            {"text": "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ", "callback_data": "test_edit"}
          ],
          [
            {"text": "ü§ñ LLM –∑–∞–ø—Ä–æ—Å", "callback_data": "test_llm"},
            {"text": "üîÄ –£—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã", "callback_data": "test_branch"}
          ],
          [
            {"text": "üö™ –ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–µ–º–æ", "callback_data": "finish"}
          ]
        ],
        "output_var": "menu_result"
      },
      "next_step": "wait_choice"
    },
    {
      "id": "wait_choice",
      "type": "input",
      "params": {
        "input_type": "callback_query",
        "timeout": 300,
        "output_var": "user_choice"
      },
      "next_step": "process_choice"
    },
    {
      "id": "process_choice",
      "type": "branch",
      "params": {
        "conditions": [
          {
            "condition": "context.callback_data == 'test_message'",
            "next_step_id": "test_message_demo"
          },
          {
            "condition": "context.callback_data == 'test_edit'",
            "next_step_id": "test_edit_demo"
          },
          {
            "condition": "context.callback_data == 'test_llm'",
            "next_step_id": "test_llm_demo"
          },
          {
            "condition": "context.callback_data == 'test_branch'",
            "next_step_id": "test_branch_demo"
          },
          {
            "condition": "context.callback_data == 'finish'",
            "next_step_id": "finish_demo"
          }
        ],
        "default_next_step_id": "show_menu"
      }
    },
    {
      "id": "test_message_demo",
      "type": "channel_send_message",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "text": "‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è!\n\nüìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:\n‚Ä¢ Channel ID: {channel_id}\n‚Ä¢ Chat ID: {chat_id}\n‚Ä¢ –í—Ä–µ–º—è: {current_datetime}",
        "parse_mode": "HTML",
        "output_var": "demo_message_result"
      },
      "next_step": "back_to_menu"
    },
    {
      "id": "test_edit_demo",
      "type": "channel_send_message",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "text": "üìù –°–µ–π—á–∞—Å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ...",
        "output_var": "edit_demo_original"
      },
      "next_step": "edit_message_step"
    },
    {
      "id": "edit_message_step",
      "type": "channel_edit_message",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "message_id": "{edit_demo_original.message_id}",
        "text": "‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ!\n\nüîÑ Message ID: {edit_demo_original.message_id}\n‚è∞ –í—Ä–µ–º—è: {current_datetime}",
        "parse_mode": "HTML",
        "output_var": "edit_result"
      },
      "next_step": "back_to_menu"
    },
    {
      "id": "test_llm_demo",
      "type": "action",
      "params": {
        "action": "llm_chat",
        "prompt": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç LLM —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –†–∞—Å—Å–∫–∞–∂–∏ –∫—Ä–∞—Ç–∫–æ –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π.",
        "output_var": "llm_response"
      },
      "next_step": "show_llm_result"
    },
    {
      "id": "show_llm_result",
      "type": "channel_send_message",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "text": "ü§ñ LLM –æ—Ç–≤–µ—Ç:\n\n{llm_response}",
        "output_var": "llm_demo_result"
      },
      "next_step": "back_to_menu"
    },
    {
      "id": "test_branch_demo",
      "type": "channel_send_message",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "text": "üîÄ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ª–æ–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤!\n\n–°–µ–π—á–∞—Å —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ...",
        "output_var": "branch_demo_msg"
      },
      "next_step": "random_branch"
    },
    {
      "id": "random_branch",
      "type": "action",
      "params": {
        "action_type": "update_context",
        "updates": {
          "random_number": "42"
        }
      },
      "next_step": "check_random"
    },
    {
      "id": "check_random",
      "type": "branch",
      "params": {
        "conditions": [
          {
            "condition": "int(context.random_number) > 30",
            "next_step_id": "branch_success"
          }
        ],
        "default_next_step_id": "branch_fail"
      }
    },
    {
      "id": "branch_success",
      "type": "channel_send_message",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "text": "‚úÖ –£—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! –ß–∏—Å–ª–æ {random_number} –±–æ–ª—å—à–µ 30.",
        "output_var": "branch_result"
      },
      "next_step": "back_to_menu"
    },
    {
      "id": "branch_fail",
      "type": "channel_send_message",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "text": "‚ùå –£—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ. –ß–∏—Å–ª–æ {random_number} –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ 30.",
        "output_var": "branch_result"
      },
      "next_step": "back_to_menu"
    },
    {
      "id": "back_to_menu",
      "type": "channel_send_buttons",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "text": "üîÑ –•–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –µ—â–µ?",
        "buttons": [
          [
            {"text": "üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é", "callback_data": "back_menu"},
            {"text": "üö™ –ó–∞–≤–µ—Ä—à–∏—Ç—å", "callback_data": "finish"}
          ]
        ],
        "output_var": "back_menu_result"
      },
      "next_step": "wait_back_choice"
    },
    {
      "id": "wait_back_choice",
      "type": "input",
      "params": {
        "input_type": "callback_query",
        "timeout": 300,
        "output_var": "back_choice"
      },
      "next_step": "process_back_choice"
    },
    {
      "id": "process_back_choice",
      "type": "branch",
      "params": {
        "conditions": [
          {
            "condition": "context.callback_data == 'back_menu'",
            "next_step_id": "show_menu"
          },
          {
            "condition": "context.callback_data == 'finish'",
            "next_step_id": "finish_demo"
          }
        ],
        "default_next_step_id": "finish_demo"
      }
    },
    {
      "id": "finish_demo",
      "type": "channel_send_message",
      "params": {
        "channel_id": "{channel_id}",
        "chat_id": "{chat_id}",
        "text": "üéâ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∞!\n\n‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:\n‚Ä¢ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∫–∞–Ω–∞–ª—ã\n‚Ä¢ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã\n‚Ä¢ LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è\n‚Ä¢ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\n\nüöÄ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!",
        "parse_mode": "HTML",
        "output_var": "finish_result"
      },
      "next_step": "end"
    },
    {
      "id": "end",
      "type": "end",
      "params": {
        "message": "–î–µ–º–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∑–∞–≤–µ—Ä—à–µ–Ω–æ"
      }
    }
  ],
  "metadata": {
    "created_at": "2024-12-XX",
    "version": "3.0.0",
    "architecture": "modern_universal"
  }
} 