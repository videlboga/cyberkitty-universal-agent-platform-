# üìã –ê–¢–û–ú–ê–†–ù–´–ô –ë–õ–û–ö: –ü—Ä–æ—Å—Ç–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –º–µ–Ω—é –≤ –±–æ—Ç–∞—Ö

atomic_template: "simple_menu"
version: "1.0"
description: "–ü—Ä–æ—Å—Ç–æ–µ –º–µ–Ω—é —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏"
author: "Universal Agent System"

# ===== –ü–ê–†–ê–ú–ï–¢–†–´ (—á—Ç–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å) =====
parameters:
  title: 
    type: "string"
    description: "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–µ–Ω—é"
    default: "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:"
  
  options:
    type: "array"
    description: "–ú–∞—Å—Å–∏–≤ –æ–ø—Ü–∏–π –º–µ–Ω—é"
    required: true
    schema:
      - text: "string"      # –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
        action: "string"    # –î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏
        data: "object"      # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  
  back_button:
    type: "boolean"
    description: "–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É '–ù–∞–∑–∞–¥'"
    default: false
  
  output_var:
    type: "string"
    description: "–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
    default: "user_choice"

# ===== –®–ê–ì–ò –í–´–ü–û–õ–ù–ï–ù–ò–Ø =====
steps:
  - id: "menu_start"
    type: "log_message"
    params:
      message: "üîÑ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é: {title}"
      level: "INFO"
    next_step: "send_menu"
  
  - id: "send_menu"
    type: "telegram_send_message"
    params:
      text: "{title}"
      buttons: "{options}"
      add_back_button: "{back_button}"
      wait_for_callback: true
      output_var: "{output_var}"
    next_step: "process_choice"
  
  - id: "process_choice"
    type: "action"
    params:
      action_type: "update_context"
      updates:
        menu_completed: true
        selected_option: "{{{output_var}}}"
    next_step: "menu_end"
  
  - id: "menu_end"
    type: "log_message"
    params:
      message: "‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: {{{output_var}}}"
      level: "INFO"

# ===== –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø =====
examples:
  - name: "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –±–æ—Ç–∞"
    parameters:
      title: "ü§ñ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
      options:
        - text: "üí¨ –ß–∞—Ç —Å –ò–ò"
          action: "start_llm_chat"
        - text: "üîç –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ"
          action: "start_rag_search"
        - text: "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
          action: "show_settings"
      back_button: false
      output_var: "main_menu_choice"

  - name: "–ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫"
    parameters:
      title: "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
      options:
        - text: "üîë –ò–∑–º–µ–Ω–∏—Ç—å API –∫–ª—é—á"
          action: "change_api_key"
        - text: "üåê –°–º–µ–Ω–∏—Ç—å –º–æ–¥–µ–ª—å"
          action: "change_model"
        - text: "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
          action: "show_stats"
      back_button: true
      output_var: "settings_choice"

# ===== –¢–†–ï–ë–û–í–ê–ù–ò–Ø =====
requirements:
  plugins:
    - "TelegramPlugin"  # –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∫–Ω–æ–ø–∫–∞–º–∏
  
  context_variables:
    - "title"      # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–µ–Ω—é
    - "options"    # –ú–∞—Å—Å–∏–≤ –æ–ø—Ü–∏–π

# ===== –†–ï–ó–£–õ–¨–¢–ê–¢ =====
output:
  context_updates:
    - "{output_var}": "–í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
    - "menu_completed": "true"
    - "selected_option": "–í—ã–±—Ä–∞–Ω–Ω–∞—è –æ–ø—Ü–∏—è" 